<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="计量经济学笔记, Frank&#39;s Blog, LDVYYC, 于雨琛, blog">
    <meta name="baidu-site-verification" content="fmlEuI34ir" />
    <meta name="google-site-verification" content="yCy2azpds5XSuGZvis6OuA-XIGF5GuGpYRAaGfD6o48" />
    <meta name="360-site-verification" content="b7c11a830ef90fd1464ad6206bb7b6e7" />
    <meta name="description" content="Ch1 Introductorywhat is econometrics
Combine statistical techniques with economic theory. 
Estimating economic relations">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>计量经济学笔记 | Frank&#39;s Blog</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">
    <style type="text/css">
        
    </style>

    <script src="/libs/jquery/jquery-2.2.0.min.js"></script>
    <script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script>
    <script>
        var _hmt = _hmt || [];
        (function () {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?ce84511d3df71640a9378a69f6293044";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>

    
        <script>
            (function(){
                var bp = document.createElement('script');
                var curProtocol = window.location.protocol.split(':')[0];
                if (curProtocol === 'https') {
                    bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
                }
                else {
                    bp.src = 'http://push.zhanzhang.baidu.com/push.js';
                }
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(bp, s);
            })();
        </script>
    

    <script>
        (function(){
        var src = "https://jspassport.ssl.qhimg.com/11.0.1.js?d182b3f28525f2db83acfaaf6e696dba";
        document.write('<script src="' + src + '" id="sozz"><\/script>');
        })();
    </script>

<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Frank's Blog" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>

<body>

    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/favicon.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">Frank's Blog</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fa fa-navicon"></i></a>
<ul class="right">
    
    <li class="hide-on-med-and-down">
        <a href="/" class="waves-effect waves-light">
            
            <i class="fa fa-home"></i>
            
            <span>首页</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/tags" class="waves-effect waves-light">
            
            <i class="fa fa-tags"></i>
            
            <span>标签</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/categories" class="waves-effect waves-light">
            
            <i class="fa fa-bookmark"></i>
            
            <span>分类</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/archives" class="waves-effect waves-light">
            
            <i class="fa fa-archive"></i>
            
            <span>归档</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/about" class="waves-effect waves-light">
            
            <i class="fa fa-user-circle-o"></i>
            
            <span>关于</span>
        </a>
    </li>
    
    <li>
        <a href="#searchModal" class="modal-trigger waves-effect waves-light">
            <i id="searchIcon" class="fa fa-search" title="搜索"></i>
        </a>
    </li>
</ul>

<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/favicon.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Frank's Blog</div>
        <div class="logo-desc">
            
            Still I Rise
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li>
            <a href="/" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-home"></i>
                
                首页
            </a>
        </li>
        
        <li>
            <a href="/tags" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-tags"></i>
                
                标签
            </a>
        </li>
        
        <li>
            <a href="/categories" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-bookmark"></i>
                
                分类
            </a>
        </li>
        
        <li>
            <a href="/archives" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-archive"></i>
                
                归档
            </a>
        </li>
        
        <li>
            <a href="/about" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-user-circle-o"></i>
                
                关于
            </a>
        </li>
        
        
    </ul>
</div>

        </div>

        
    </nav>

</header>

    
<script src="/libs/cryptojs/crypto-js.min.js"></script>
<script>
    (function() {
        let pwd = '';
        if (pwd && pwd.length > 0) {
            if (pwd !== CryptoJS.SHA256(prompt('请输入访问本文章的密码')).toString(CryptoJS.enc.Hex)) {
                alert('密码错误，将返回主页！');
                location.href = '/';
            }
        }
    })();
</script>




<div class="bg-cover pd-header post-cover" style="background-image: url('https://cdn.jsdelivr.net/gh/ldvyyc/ImgBed/20230410114258.png')">
    <div class="container">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <div class="description center-align post-title">
                        计量经济学笔记
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 20px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                        <a href="/tags/Finance/" target="_blank">
                            <span class="chip bg-color">Finance</span>
                        </a>
                        
                        <a href="/tags/Notes/" target="_blank">
                            <span class="chip bg-color">Notes</span>
                        </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fa fa-bookmark fa-fw icon-category"></i>
                        
                        <a href="/categories/Learning/" class="post-category" target="_blank">
                            Learning
                        </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                <div class="post-date info-break-policy">
                    <i class="fa fa-calendar-minus-o fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2023-04-10
                </div>

                <div class="post-author info-break-policy">
                    <i class="fa fa-user-o fa-fw"></i>作者:&nbsp;&nbsp;
                    
                    Frank Yu
                    
                </div>

                
                
                <div class="info-break-policy">
                    <i class="fa fa-file-word-o fa-fw"></i>文章字数:&nbsp;&nbsp;
                    13.2k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="fa fa-clock-o fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    75 分
                </div>
                
                

                
                <div id="busuanzi_container_page_pv" class="info-break-policy">
                    <i class="fa fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                    <span id="busuanzi_value_page_pv"></span>
                </div>
                
            </div>
        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h2 id="Ch1-Introductory"><a href="#Ch1-Introductory" class="headerlink" title="Ch1 Introductory"></a>Ch1 Introductory</h2><h3 id="what-is-econometrics"><a href="#what-is-econometrics" class="headerlink" title="what is econometrics"></a>what is econometrics</h3><ul>
<li>Combine statistical techniques with economic theory. </li>
<li>Estimating economic relationships.</li>
<li>testing economic theories.</li>
<li>evaluating and implementing government and business policy.</li>
</ul>
<h3 id="basic-types"><a href="#basic-types" class="headerlink" title="basic types"></a>basic types</h3><h4 id="Descriptive"><a href="#Descriptive" class="headerlink" title="Descriptive"></a>Descriptive</h4><ul>
<li>challenges<ul>
<li>Sampling<ul>
<li>draw conclosion about the population based on sample.</li>
</ul>
</li>
<li>Summary statistics<ul>
<li>nice way to summarize complicated data.</li>
</ul>
</li>
</ul>
</li>
<li>If we have data we would know the answer.</li>
<li>Conditional Expectations: if I condition X to be some value, what is the expect value of Y. Often a variable that can take on a very large number of values is treated as continuous for convenient.</li>
<li>Example<ul>
<li><em>Mothers smoke one more cigarette during pregnancy are expected to give birth to child with 15g lower birth weight.</em></li>
</ul>
</li>
</ul>
<h4 id="Forecasting"><a href="#Forecasting" class="headerlink" title="Forecasting"></a>Forecasting</h4><ul>
<li>challenges<ul>
<li>Underfitting</li>
<li>Overfitting</li>
</ul>
</li>
<li>If we know the data and wait long enough, we will know the answer.</li>
</ul>
<h4 id="Causal-（for-structural）"><a href="#Causal-（for-structural）" class="headerlink" title="Causal （for structural）"></a>Causal （for structural）</h4><ul>
<li>Correlation: how two random variables move together </li>
<li>The difference between causation and correlation is a key concept in econometrics. We would like to identify causal effects and estimate their magnitude. </li>
<li>It is generally agreed that this is very difficult to do; having an economic model is often essential in establishing the causal interpretation.</li>
<li><strong>Unless run perfect experiment, we will never know the answer.</strong></li>
<li>requires $𝐸(𝑢|𝑥) &#x3D; 0$</li>
<li><strong>Econometrics focus on causal problems inherent in collecting and analyzing observational economic data.</strong> </li>
<li>有几种可能：<ul>
<li>x -&gt; y</li>
<li>z -&gt; x, z -&gt; y</li>
<li>y -&gt; x</li>
</ul>
</li>
<li>Example<ul>
<li><em>Mothers smoke one more cigarette during pregnancy causes their child to have 15g lower birth weight.</em></li>
</ul>
</li>
</ul>
<h3 id="Structure-of-Economic-data"><a href="#Structure-of-Economic-data" class="headerlink" title="Structure of Economic data"></a>Structure of Economic data</h3><h4 id="Cross-sectional-data"><a href="#Cross-sectional-data" class="headerlink" title="Cross-sectional data"></a>Cross-sectional data</h4><ul>
<li>A cross-sectional data set consists of a sample of units taken at a given point in time. </li>
<li>截面数据</li>
<li>assume:<ul>
<li>sample is drawn from the underlying population randomly</li>
<li>Violation of random sampling: We want to obtain a random sample of family income. However, wealthier families are more likely to refuse to report.</li>
</ul>
</li>
</ul>
<h4 id="Time-Series-data"><a href="#Time-Series-data" class="headerlink" title="Time-Series data"></a>Time-Series data</h4><ul>
<li>Each observation is uniquely determined by time </li>
<li>时间序列</li>
<li>A time series data set consists of observations on a variable or several variables over time.<ul>
<li>可以是对多个变量的时间序列</li>
</ul>
</li>
<li>Time is an important dimension in a time series data set.</li>
</ul>
<h4 id="Pooled-Cross-Sections-and-Panel-or-Longitudinal-Data"><a href="#Pooled-Cross-Sections-and-Panel-or-Longitudinal-Data" class="headerlink" title="Pooled Cross Sections and Panel or Longitudinal Data"></a>Pooled Cross Sections and Panel or Longitudinal Data</h4><ul>
<li>Pooled cross sections include cross-sectional data in multiple years. </li>
<li>A panel data set consists of a time series for each cross-sectional member in the data set.</li>
<li>Panel data: <ul>
<li>the same units over time</li>
</ul>
</li>
<li>pooled cross sections: <ul>
<li>diferent units, diferent time.</li>
</ul>
</li>
<li>Each observation is uniquely determined by the unit and the time.</li>
<li>同时具备时间和变量差异</li>
</ul>
<hr>
<h2 id="Ch2-The-Simple-Regression-Model"><a href="#Ch2-The-Simple-Regression-Model" class="headerlink" title="Ch2 The Simple Regression Model:"></a>Ch2 The Simple Regression Model:</h2><h3 id="Interpretation-and-Estimation"><a href="#Interpretation-and-Estimation" class="headerlink" title="Interpretation and Estimation"></a>Interpretation and Estimation</h3><h4 id="Descriptive-analysis"><a href="#Descriptive-analysis" class="headerlink" title="Descriptive analysis"></a>Descriptive analysis</h4><ul>
<li>Define conditional expectation E（y|x）<ul>
<li>if I condition X to be some value, what is the expected value of Y?</li>
</ul>
</li>
</ul>
<h4 id="Simple-Linear-model"><a href="#Simple-Linear-model" class="headerlink" title="Simple Linear model"></a>Simple Linear model</h4><ul>
<li><p>$$E(y|x)&#x3D;\beta_0+\beta_1x$$</p>
</li>
<li><p>$$\beta_0&#x3D;E(y|x&#x3D;0)$$</p>
</li>
<li><p>$$\beta_1&#x3D;\frac{\partial E(y|x)}{\partial x}$$</p>
</li>
<li><p>let $u&#x3D;y-E(y|x)$, thus $E(u|x)&#x3D;0$</p>
</li>
<li><p>$$\hat{u_i}&#x3D;y_i-\hat{\beta_0}-\hat{\beta_1}x_i$$</p>
</li>
<li><p>using law of iterated expectation, we get</p>
<ul>
<li>$E(u)&#x3D;0$, and $E(ux)&#x3D;0$</li>
</ul>
</li>
<li><p>对于总体，写成 $y_i&#x3D;\beta_0+\beta_1x_i+u_i$</p>
</li>
<li><p>对于样本，写成 $y_i&#x3D;\hat{\beta_0}+\hat{\beta_1}x_i+\hat{u_i}$</p>
<ul>
<li>带帽子表示的是样本，用来估计实际值</li>
</ul>
</li>
</ul>
<h5 id="Method-of-Moments"><a href="#Method-of-Moments" class="headerlink" title="Method of Moments"></a>Method of Moments</h5><ul>
<li><p>Method of moments: use the sample average to estimate the population expectation </p>
</li>
<li><p>Use $\frac{1}{N}\sum$ to replace $E[·]$</p>
<table>
<thead>
<tr>
<th>population expectations</th>
<th>sample analogue</th>
</tr>
</thead>
<tbody><tr>
<td>$E(u)&#x3D;0$</td>
<td>$\frac{1}{N}\sum \hat{u_i}&#x3D;0$</td>
</tr>
<tr>
<td>$E(ux)&#x3D;0$</td>
<td>$\frac{1}{N}\sum x_i\hat{u_i}&#x3D;0$</td>
</tr>
</tbody></table>
</li>
<li><p>using $\hat{u_i}&#x3D;y_i-\hat{\beta_0}-\hat{\beta_1}x_i$ to represent u, the result is :</p>
<ul>
<li>$$\hat{\beta_1}&#x3D;\frac{\frac{1}{N}\sum_{i&#x3D;1}^N(x_i-\bar{x})(y_i-\bar{y})}{\frac{1}{N}\sum_{i&#x3D;1}^N(x_i-\bar{x})^2}$$</li>
<li>$$\hat{\beta_0}&#x3D;\bar{y}-\hat{\beta_1}\bar{x}$$</li>
</ul>
</li>
</ul>
<h4 id="Causal-Estimation"><a href="#Causal-Estimation" class="headerlink" title="Causal Estimation"></a>Causal Estimation</h4><ul>
<li>$$y&#x3D;\beta_0+\beta_1 x+u$$<ul>
<li>$\beta_{0}$ and $\beta_1$ are unknown numbers in the nature we want to uncover</li>
<li>You choose x</li>
<li>Nature chose u in a way that is unrelated to your choice of x</li>
</ul>
</li>
<li>u represent things affect y other than x<ul>
<li>we think of u as some real thing, It’s just we can’t observe it</li>
<li>u 是一个实际存在的变量</li>
<li>To estimate the model,we need to know how u is determined.</li>
<li>The simplest case is that u is assigned at random </li>
<li>We can write this as $E(u|x)&#x3D;0$.<ul>
<li><strong>u 不随着 x 而变</strong><ul>
<li>重要！协方差为0</li>
</ul>
</li>
<li>均值是0</li>
</ul>
</li>
</ul>
</li>
<li>对于上式两边取期望，对x求偏导：<ul>
<li>$$\frac{\partial E[y|x]}{\partial x}&#x3D;\beta_{1}+\frac{\partial E[u|x]}{\partial x}$$</li>
<li>只有当$E[u|x]$ 是常数时,$\beta_1$ 表示当x变化1时，y的平均变化。</li>
<li>This condition gives the model a causal interpretation:<ul>
<li>if $E(u|x)$ does not vary when x changes, then any change in y can be attributed to x</li>
</ul>
</li>
<li>因此$\beta_{1}$ 反应了x对y的因果关系</li>
</ul>
</li>
</ul>
<h4 id="Forecasting-1"><a href="#Forecasting-1" class="headerlink" title="Forecasting"></a>Forecasting</h4><ul>
<li>我们希望得到：<ul>
<li>$$\hat{y}^*&#x3D;\hat{\beta_0}+\hat{\beta_1}x^*$$</li>
</ul>
</li>
<li>和causal不同，因为我们没有自己选择 $x^*$</li>
<li>使用最小二乘法，argmax来判断回归的y和真实值的关系。</li>
</ul>
<p><strong>两种方法：moment和OLS</strong></p>
<h3 id="Properties-of-Simple-Regression-Model"><a href="#Properties-of-Simple-Regression-Model" class="headerlink" title="Properties of Simple Regression Model"></a>Properties of Simple Regression Model</h3><h4 id="Properties-of-OLS-on-Any-Sample-of-Data"><a href="#Properties-of-OLS-on-Any-Sample-of-Data" class="headerlink" title="Properties of OLS on Any Sample of Data"></a>Properties of OLS on Any Sample of Data</h4><ul>
<li><p>$$\sum_{i&#x3D;1}^{N}\hat{u}_{i}&#x3D;0.$$</p>
</li>
<li><p>$$\sum_{i&#x3D;1}^{N}x_{i}{\hat{u}}_{i}&#x3D;0.$$</p>
</li>
<li><p>$$\sum_{i&#x3D;1}^N\hat{y}_i\hat{u}_i&#x3D;0$$</p>
</li>
<li><p>$$\hat{\beta_0}+\hat{\beta_1}\bar{x}&#x3D;\bar{y}$$</p>
</li>
</ul>
<h4 id="Goodness-of-Fit"><a href="#Goodness-of-Fit" class="headerlink" title="Goodness of Fit"></a>Goodness of Fit</h4><ul>
<li>measure how well our model fits the data</li>
<li>decompose $y_i$ into two parts: the fitted value and the residual.<ul>
<li>$$y_i&#x3D;\hat{y_i}+\hat{u_i}$$</li>
<li>第一部分是模型解释的，第二部分不是</li>
</ul>
</li>
<li>Define the following terms：<ul>
<li><p>Total sum of squares（SST）$$S S T&#x3D;\sum_{i&#x3D;1}^{N}\bigl(y_{i}-\bar{y}\bigr)^{2}.$$</p>
</li>
<li><p>Explained sum of squares（SSE）$$S S E&#x3D;\sum_{i&#x3D;1}^{N}({\hat{y}}_{i}-{\bar{y}})^{2}.$$</p>
</li>
<li><p>Residual sum of squares（SSR）$$S S R&#x3D;\sum_{i&#x3D;1}^{N}\hat{u}_{i}^{2}.$$</p>
</li>
<li><p>$$SST&#x3D;SSE+SSR$$</p>
</li>
</ul>
</li>
<li>定义 Goodness of fit， $R^2$<ul>
<li>$$R^2&#x3D;\frac{SSE}{SST}$$</li>
<li>即y有多大的部分是由$y_i$ 解释的</li>
<li>总是在0到1之间</li>
<li>只是描述了x和y的相关性，并不能表示因果关系</li>
</ul>
</li>
</ul>
<h4 id="Functional-form"><a href="#Functional-form" class="headerlink" title="Functional form"></a>Functional form</h4><ul>
<li><p>$$log(y)&#x3D;\beta_0+\beta_1 x+u$$</p>
<ul>
<li>$$\beta_1&#x3D;\frac{dlog(y)}{dy}&#x3D;\frac{dy}{y}\cdot\frac{1}{x}$$</li>
</ul>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/ldvyyc/ImgBed/20230407231705.png" alt="Functional forms involving log"></p>
</li>
</ul>
<h4 id="Expected-Values-and-Variances-of-the-OLS-Estimators"><a href="#Expected-Values-and-Variances-of-the-OLS-Estimators" class="headerlink" title="Expected Values and Variances of the OLS Estimators"></a>Expected Values and Variances of the OLS Estimators</h4><h5 id="Unbiasedness-of-OLS"><a href="#Unbiasedness-of-OLS" class="headerlink" title="Unbiasedness of OLS"></a>Unbiasedness of OLS</h5><ul>
<li>Unbiasedness means the expectation of the estimator equals the true value.</li>
<li>无偏性</li>
<li>$E(\hat{\beta})&#x3D;\beta$</li>
</ul>
<h5 id="假设：SLR（simple-linear-regression）"><a href="#假设：SLR（simple-linear-regression）" class="headerlink" title="假设：SLR（simple linear regression）"></a>假设：SLR（simple linear regression）</h5><ol>
<li>Linear in Parameters </li>
<li>Random Sampling <ul>
<li>$Cov(u_i,u_j)&#x3D;0$</li>
</ul>
</li>
<li>Sample Variation in the Explanatory Variable <ul>
<li>即自变量x的取值不能只有一个点</li>
</ul>
</li>
<li>Zero Conditional Mean: $E(u|x) &#x3D; 0$</li>
</ol>
<p>在上面四个条件成立时，$\beta_0$ 和 $\beta_1$ 都满足无偏性</p>
<ul>
<li>Though the OLS estimator is unbiased, it is still possible that the estimates calculated using the sample is very different from β in the population.</li>
</ul>
<ol start="5">
<li>Homoskedasticity <ul>
<li>The error u has the same variance given any value of the explanatory variable. </li>
<li>In other words, $Var(u|x)&#x3D;\sigma^2$</li>
<li>同方差性</li>
<li><img src="https://cdn.jsdelivr.net/gh/ldvyyc/ImgBed/20230408134326.png" alt="left: homoskedasticity; right: heteroskedasticity"></li>
</ul>
</li>
</ol>
<p>在上面5个条件成立时，可以求方差：</p>
<ul>
<li>$$Var(\hat{\beta_1}|x)&#x3D;\frac{\sigma^2}{\sum_{i&#x3D;1}^N(x_i-\bar{x})^2}&#x3D;\frac{\sigma^2}{SST_x}$$<ul>
<li>其中 $\sigma$ 是 u 的标准差</li>
<li>当 $\sigma$ 大时$V a r(\hat{\beta}_{1}|x)$ 方差大</li>
<li>当 x 的方差大时 $V a r(\hat{\beta}_{1}|x)$ 小</li>
</ul>
</li>
<li>$$V a r(\hat{\beta_0}|x)&#x3D;\frac{\sigma^2\sum_{i&#x3D;1}^Nx_i^2}{N\sum_{i&#x3D;1}^N(x_i-\bar{x})^2}$$</li>
</ul>
<h5 id="估计-sigma"><a href="#估计-sigma" class="headerlink" title="估计$\sigma$"></a>估计$\sigma$</h5><ul>
<li>需要用sample来估计 $\sigma^2$</li>
<li>$$s^2\equiv\hat{\sigma}^2&#x3D;\frac{1}{N-2}\sum_{i&#x3D;1}^N\hat{u}_i^2$$</li>
<li>这是无偏估计，其中-2是因为有两个约束条件，少了两个自由度。</li>
</ul>
<h2 id="Ch3-Multiple-Regression-Analysis-Estimation"><a href="#Ch3-Multiple-Regression-Analysis-Estimation" class="headerlink" title="Ch3 Multiple Regression Analysis: Estimation"></a>Ch3 Multiple Regression Analysis: Estimation</h2><h3 id="Why-we-need-multiple-regression-model"><a href="#Why-we-need-multiple-regression-model" class="headerlink" title="Why we need multiple regression model?"></a>Why we need multiple regression model?</h3><ul>
<li>Descriptive analysis: sometimes we want to estimate the conditional mean of y on multiple variables</li>
<li>Causal estimation: we know that something other than x may afect y, so we explicitly control them.</li>
<li>Forecasting: we want to use more variables to better predict y</li>
</ul>
<h3 id="Estimation-and-Interpretation"><a href="#Estimation-and-Interpretation" class="headerlink" title="Estimation and Interpretation"></a>Estimation and Interpretation</h3><ul>
<li>Population regression model:$$y&#x3D;\beta_0+\beta_1 x_1+\cdots+\beta_nx_n+u$$<ul>
<li>zero conditional mean:<ul>
<li>$$E(u|x_1,\cdots,x_n)&#x3D;0$$</li>
</ul>
</li>
<li>besides, using law of iterated expectation<ul>
<li>$$E(x_ju)&#x3D;0\quad E(u)&#x3D;0$$</li>
</ul>
</li>
</ul>
</li>
<li>Fitted value: $$\hat{y_i}&#x3D;\hat{\beta_0}+\hat{\beta_1}x_{i1}+\cdots+\hat{\beta_k}x_{i k}$$</li>
<li>residual: $$\hat{u_i}&#x3D; y_{i}-\hat{y_i}$$</li>
</ul>
<h4 id="Sample-analog"><a href="#Sample-analog" class="headerlink" title="Sample analog"></a>Sample analog</h4><table>
<thead>
<tr>
<th>population expectations</th>
<th>sample analogue</th>
</tr>
</thead>
<tbody><tr>
<td>$E(u)&#x3D;0$</td>
<td>$\frac{1}{N}\sum \hat{u_i}&#x3D;0$</td>
</tr>
<tr>
<td>$E(x_1u)&#x3D;0$</td>
<td>$\frac{1}{N}\sum x_{i1}\hat{u_i}&#x3D;0$</td>
</tr>
<tr>
<td>$E(x_ku)&#x3D;0$</td>
<td>$\frac{1}{N}\sum x_{ik}\hat{u_i}&#x3D;0$</td>
</tr>
</tbody></table>
<h4 id="OLS"><a href="#OLS" class="headerlink" title="OLS"></a>OLS</h4><ul>
<li>$$H\equiv\sum_{i&#x3D;1}^n\hat{u_i}^2&#x3D;\sum(y_i-b_0-b_1x_{i1}-\cdots-b_kx_{i k})^2$$</li>
<li>求最小值，得一阶条件：<ul>
<li>$$\frac{\partial H}{\partial b_0}&#x3D;-\sum_{i&#x3D;1}^n2(y_i-\hat{\beta_0}-\hat{\beta_1}x_{i1}-\cdots-\hat{\beta_k}x_{ik})&#x3D;0$$</li>
<li>$${\frac{\partial H}{\partial b_{j}}}&#x3D;-\sum_{i&#x3D;1}^{n}2x_{i j}(y_{i}-{\hat{\beta_0}}-{\hat{\beta_1}}x_{i1}-\cdots-{\hat{\beta_k}}x_{i k})&#x3D;0,\forall j&#x3D;1,2,…,k.$$</li>
</ul>
</li>
<li>OLS and sample analogue give the same answer.</li>
</ul>
<h4 id="Interpretation"><a href="#Interpretation" class="headerlink" title="Interpretation"></a>Interpretation</h4><ul>
<li><p>The coeicient of $x_i$ represents holding fixed other factors, the change in y when $x_i$ increases by one unit.</p>
</li>
<li><p>$$\Delta\hat{y}&#x3D;\hat{\beta}_1 \Delta x_1+\hat{\beta}_2 \Delta x_2+\cdots+\hat{\beta}_k \Delta x_k$$</p>
</li>
<li><p>求 $\hat{\beta_j}$: Frisch-Waugh-Lovell Theorem</p>
<ul>
<li>Regress $x_j$ on other independent variables （including the constant）, obtain the residual $\hat{r_{ij}}$.</li>
<li>Regress y on other independent variables （including the constant）, obtain the residual $\hat{r_{iy}}$.</li>
<li>Regress $\hat{r_{iy}}$ on $\hat{r_{ij}}$, The resulting slope coefficient is $\hat{\beta_j}$</li>
</ul>
</li>
</ul>
<h4 id="Goodness-of-fit"><a href="#Goodness-of-fit" class="headerlink" title="Goodness of fit"></a>Goodness of fit</h4><ul>
<li>和 SLR 相同</li>
<li>但随着变量增加 $R^2$ 几乎一定会增大</li>
<li>引入 Adjusted R2<ul>
<li>$$\bar{R}^2&#x3D;1-\frac{SSR&#x2F;(N-k-1)}{SST&#x2F;N-1}&#x3D;1-(1-R^2)\frac{N-1}{N-k-1}$$</li>
<li>N represents the size of the sample, k represents the number of independent variables （excluding the constant）</li>
</ul>
</li>
</ul>
<h3 id="Expected-Values-and-Variances-of-the-OLS-Estimators-1"><a href="#Expected-Values-and-Variances-of-the-OLS-Estimators-1" class="headerlink" title="Expected Values and Variances of the OLS Estimators"></a>Expected Values and Variances of the OLS Estimators</h3><h4 id="假设：MLR（multiple-linear-regression）"><a href="#假设：MLR（multiple-linear-regression）" class="headerlink" title="假设：MLR（multiple linear regression）"></a>假设：MLR（multiple linear regression）</h4><ol>
<li>Linear in Parameters </li>
<li>Random Sampling <ul>
<li>$Cov(u_i,u_j)&#x3D;0$</li>
</ul>
</li>
<li>No perfect collinearity<ul>
<li>不能线性相关</li>
<li>不然无法区别这些线性相关成分</li>
</ul>
</li>
<li>Zero Conditional Mean: <ul>
<li>$E(u|x_1,\cdots,x_k) &#x3D; 0$</li>
</ul>
</li>
</ol>
<ul>
<li>在上面四个条件成立时，$\beta_0$ 和 $\beta_1$ 都满足无偏性</li>
</ul>
<ol start="5">
<li>Homoskedasticity <ul>
<li>$Var(u|x_1,\cdots,x_k)&#x3D;\sigma^2$</li>
<li>同方差性</li>
</ul>
</li>
</ol>
<ul>
<li><p>MLR1-5合成 Gauss-Markov Assumption</p>
</li>
<li><p>在Gauss-Markov条件下，方差满足：</p>
<ul>
<li>$$V a r(\hat{\beta_j})&#x3D;\frac{\sigma^{2}}{SST_j(1-R_j^2)}$$</li>
<li>$R_j^2$ is the R-squared from regressing $x_j$ on all other independent variables and including an intercept</li>
</ul>
</li>
<li><p>The unbiased estimator of $σ^2$ is:</p>
<ul>
<li>$$\hat{\sigma}^{2}&#x3D;\frac{1}{N-k-1}\sum_{i&#x3D;1}^{n}\hat{u}_{i}^{2}.$$</li>
<li>自由度：N-k-1</li>
<li>是无偏估计</li>
</ul>
</li>
</ul>
<h4 id="BLUE"><a href="#BLUE" class="headerlink" title="BLUE"></a>BLUE</h4><table>
<thead>
<tr>
<th>sdandard deviation</th>
<th>standard error</th>
</tr>
</thead>
<tbody><tr>
<td>$sd(\hat{\beta_j})$</td>
<td>$se(\hat{\beta_j})$</td>
</tr>
<tr>
<td>$\frac{\sigma}{[SST_j(1-R_j^2)]^{1&#x2F;2}}$</td>
<td>$\frac{\hat{\sigma}}{[SST_j(1-R_j^2)]^{1&#x2F;2}}$</td>
</tr>
<tr>
<td>$\sigma^2&#x3D;\text{Var of u}$</td>
<td>$\hat{\sigma}^{2}&#x3D;\frac{1}{n-k-1}\sum \hat{u}^2$</td>
</tr>
<tr>
<td>unknown</td>
<td>estimated using sample</td>
</tr>
</tbody></table>
<ul>
<li>OLS 是 best linear unbiased estimator, BLUE<ul>
<li>满足线性，并且方差最小。</li>
</ul>
</li>
</ul>
<h3 id="Practical-issues"><a href="#Practical-issues" class="headerlink" title="Practical issues"></a>Practical issues</h3><h4 id="Omitted-bias"><a href="#Omitted-bias" class="headerlink" title="Omitted bias"></a>Omitted bias</h4><ul>
<li><p>假设有两个自变量，但只对其中一个进行回归，那么得到的$\hat{\beta}$ 与实际值有一个误差。</p>
</li>
<li><p>$E(\tilde{\beta}_1)&#x3D;\beta_1+\beta_2\tilde{\delta}_1$</p>
</li>
<li><p>thus, $Bias(\tilde{\beta_1})&#x3D;\beta_{2}\tilde{\delta}_{1}$</p>
</li>
<li><table>
<thead>
<tr>
<th></th>
<th>$Corr(x_1,x_2)&gt;0$</th>
<th>$Corr(x_1,x_2)&lt;0$</th>
</tr>
</thead>
<tbody><tr>
<td>$\beta_2&gt;0$</td>
<td>Positive Bias</td>
<td>Negative Bias</td>
</tr>
<tr>
<td>$\beta_2&lt;0$</td>
<td>Negative Bias</td>
<td>Positive Bias</td>
</tr>
</tbody></table>
</li>
<li><p>影响无偏性</p>
</li>
</ul>
<h4 id="including-irrelavent"><a href="#including-irrelavent" class="headerlink" title="including irrelavent"></a>including irrelavent</h4><ul>
<li>不影响无偏性，但方差会变大</li>
</ul>
<h4 id="Multicollinearity"><a href="#Multicollinearity" class="headerlink" title="Multicollinearity"></a>Multicollinearity</h4><ul>
<li>high （but not perfect） correlation between two or more independent variables</li>
<li>不影响无偏性，但方差会变大</li>
</ul>
<h2 id="Ch4-Multiple-Regression-Analysis-Inference"><a href="#Ch4-Multiple-Regression-Analysis-Inference" class="headerlink" title="Ch4 Multiple Regression Analysis: Inference"></a>Ch4 Multiple Regression Analysis: Inference</h2><h3 id="Classical-Linear-Regression-Model"><a href="#Classical-Linear-Regression-Model" class="headerlink" title="Classical Linear Regression Model"></a>Classical Linear Regression Model</h3><h4 id="The-Distribution-of-hat-β-j"><a href="#The-Distribution-of-hat-β-j" class="headerlink" title="The Distribution of $\hat{β_j}$"></a>The Distribution of $\hat{β_j}$</h4><ul>
<li><p>为了得到分布，在Gauss-Markov条件上还要加上一条：</p>
</li>
<li><p>MLR6: Normality</p>
<ul>
<li>$$u\sim N(0,\sigma^2)$$</li>
</ul>
</li>
<li><p>Assumptions MLR.1 through MLR.6 are called the classical linear model <strong>CLM</strong> assumptions. </p>
</li>
<li><p>summarize the population assumptions of the CLM is</p>
<ul>
<li>$$y|{\bf x}\ \sim\ No r m a l(\beta_{0}\ +\beta_{1}x_{1}+\ldots+\beta_{k}x_{k},\sigma^{2})$$</li>
</ul>
</li>
<li><p>在CLM条件下，$\beta$ 服从正态分布</p>
<ul>
<li>$$\frac{\hat{\beta}_j-\beta_j}{sd(\hat{\beta}_j)}\sim Normal(0,1)$$</li>
</ul>
</li>
<li><p>但由于实际中标准差不知道，需要用标准误来算。</p>
<ul>
<li>$$\frac{\hat{\beta_j}-\beta_j}{s e(\hat{\beta_j})}\sim t_{N-k-1}&#x3D; t_{d f},$$</li>
<li>服从t分布，N-k-1是自由度，N是多少个样本，k是回归里面有多少个x</li>
</ul>
</li>
</ul>
<h3 id="t检验"><a href="#t检验" class="headerlink" title="t检验"></a>t检验</h3><ul>
<li>检验某个系数是否为0</li>
</ul>
<h4 id="Null-hypothesis"><a href="#Null-hypothesis" class="headerlink" title="Null hypothesis"></a>Null hypothesis</h4><ul>
<li>Let $H_0$ be the null hypothesis that we want to test. Let $H_1$ be the alternative hypothesis. </li>
<li>We reject the null hypothesis when the test statistic falls in the rejection region.</li>
</ul>
<h4 id="rejection-region"><a href="#rejection-region" class="headerlink" title="rejection region"></a>rejection region</h4><ul>
<li>type 1 error:<ul>
<li>significance level &#x3D; α &#x3D; $Pr(\text{rejecting }H_0|H_0\text{ is true})$</li>
</ul>
</li>
<li>type 2 error:<ul>
<li>$Pr(\text{not rejecting }H_0|H_1\text{ is true})$</li>
</ul>
</li>
<li>我们的想法是先固定一个significance level，确定对type 1 error 的容忍度，然后再最小化 type 2 error</li>
</ul>
<h4 id="Testing-Against-One-Sided-Alternatives"><a href="#Testing-Against-One-Sided-Alternatives" class="headerlink" title="Testing Against One-Sided Alternatives"></a>Testing Against One-Sided Alternatives</h4><ul>
<li>Suppose we are interested in testing<br>$$<br>\begin{array}{ll}<br>H_0: &amp; \beta_j&#x3D;0 . \\<br>H_1: &amp; \beta_j&gt;0 .<br>\end{array}<br>$$</li>
<li>Consider a test statistic:$$\frac{\hat{\beta}_j-\beta_j}{\operatorname{se(}(\hat{\beta}_j)}$$</li>
<li>When $H_0$ is true, the test statistic is: $$\frac{\hat{\beta_j}}{s e(\hat{\beta_j})} \sim t_{N-k-1}&#x3D;t_{df}$$</li>
</ul>
<ol>
<li>It depends on the data.</li>
<li>We know its distribution under $H_0$.</li>
</ol>
<ul>
<li>令 $$t_{\hat{\beta}_j} \equiv \frac{\hat{\beta}_j}{s e(\hat{\beta}_j)}$$</li>
<li>We often call $t_{\hat{\beta}_j}$ t-statistic or t-ratio of $\hat{\beta}_j$.</li>
<li>$t_{\hat{\beta}_j}$ has the same sign as $\hat{\beta}_j$, because $\operatorname{se}(\hat{\beta}_j)&gt;0$.</li>
</ul>
<ul>
<li>直觉上, 当 $t_\hat{\beta_j}$ 足够大的时候拒绝 $H_0$ :  $t_\hat{\beta_i}$ 越大,  $H_0$ 是真的可能性越低,  $H_1$ 是真的可能性越高。</li>
</ul>
<ul>
<li>多大算足够大？<ul>
<li>Fix a significance level of $5 %$. The critical value, $c$ is the 95 th percentile when $H_0$ is true. It means when $H_0$ is true, the probability of getting a value as large as $c$ is $5 %$.</li>
<li>Rejection rule:$t_{\hat{\beta}_j}&gt;c$</li>
</ul>
</li>
<li>Rejecting $H_0$ when $t_{\hat{\beta}_j}&gt;c$ means the probability of making a type I error, that is, the probability of rejecting $H_0$ when $H_0$ is true, is $5 %$.</li>
<li><img src="https://cdn.jsdelivr.net/gh/ldvyyc/ImgBed/20230408165619.png" alt="单边检验，5%"></li>
</ul>
<h5 id="The-idea-of-test"><a href="#The-idea-of-test" class="headerlink" title="The idea of test"></a>The idea of test</h5><ol>
<li>Fix a significance level $\alpha$. That is, decide our level of “tolerence” for the type I error.</li>
<li>Find the critical value associated with $\alpha$. For $H_1: \beta_j&gt;0$, this means finding the $(1-\alpha)$-th percentile of the $\mathrm{t}$ distribution with $d f&#x3D;N-k-1$.</li>
<li>Reject $H_0$ if  $t_{\hat{\beta}_j}&gt;c$</li>
</ol>
<ul>
<li>通常第一类错误和第二类错误是不能同时缩小的。需要取舍。</li>
</ul>
<h4 id="Two-sided-Alternatives"><a href="#Two-sided-Alternatives" class="headerlink" title="Two-sided Alternatives"></a>Two-sided Alternatives</h4><ul>
<li><p>We want to test:$$\begin{array}{ll}H_0: &amp; \beta_j&#x3D;0 . \\ H_1: &amp; \beta_j \neq 0 .<br>\end{array}$$</p>
</li>
<li><p>This is the relevant alternative when the sign of $\beta_j$ is not well determined by theory.</p>
</li>
<li><p>Even when we know whether $\beta_j$ is positive or negative under the alternative, a two-sided test is often prudent.</p>
</li>
<li><p>求法：</p>
<ol>
<li>Fix a significance level $\alpha$. That is, decide our level of “tolerence” for the type I error.</li>
<li>Find the critical value associated with $\alpha$. For $H_1: \beta_j \neq 0$, this means finding the $(1-\alpha &#x2F; 2)$-th percentile of the $\mathrm{t}$ distribution with $d f&#x3D;N-k-1$.</li>
<li>Reject $H_0$ if$$|t_{\hat{\beta}_j}|&gt;c .$$</li>
</ol>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/ldvyyc/ImgBed/20230408165324.png" alt="双边检验，5%"></p>
</li>
<li><p>没有说明的话通常是双边的</p>
</li>
<li><p>If $H_0$ is rejected in favor of $H_1: \quad \beta_j \neq 0$ at the $5 %$ level, we usually say that “ $x_j$ is statistically significant, or statistically different from zero, at the $5 %$ level.”</p>
</li>
<li><p>If $H_0$ is not rejected, we say that “ $x_j$ is statistically insignificant at the $5 %$ level.”</p>
</li>
</ul>
<h4 id="Other-Hypothesis"><a href="#Other-Hypothesis" class="headerlink" title="Other Hypothesis"></a>Other Hypothesis</h4><ul>
<li>If the null is stated as:<br>$$<br>H_0: \beta_j&#x3D;a_j<br>$$<br>Then the t-statistic is$$\frac{\hat{\beta_j}-a_j}{\operatorname{se}(\hat{\beta_j})} \sim t_{N-k-1}$$<br>We can use the general t statistic to test against one-sided or two-sided alternatives.</li>
</ul>
<h4 id="p-Values-for-t-Tests"><a href="#p-Values-for-t-Tests" class="headerlink" title="p-Values for t Tests"></a>p-Values for t Tests</h4><ul>
<li>Given the observed value of the t statistic, what is the smallest significance level at which the null hypothesis would be rejected? </li>
<li>We call this “smallest signiicance level” p-value. </li>
<li>p-value represents the probability of observing a value as extreme as $t_{\hat{\beta}_j}$ under the $H_0$</li>
<li>$$<br>\begin{array}{ll}<br>H_0: &amp; \beta_j&#x3D;0 . \\<br>H_1: &amp; \beta_j \neq 0 .<br>\end{array}<br>$$<ul>
<li>The p-value in this case is$$P(|T|&gt;|t|),$$</li>
<li>where we let $T$ denote a $\mathrm{t}$ distributed random variable with $N-k-1$ degrees of freedom and let $t$ denote the numerical value of the test statistic.</li>
</ul>
</li>
</ul>
<ul>
<li>The p-value nicely summarizes the strength or weakness of the empirical evidence against the null hypothesis.</li>
<li>The p-value is the probability of observing a $t$ statistic as extreme as we did if the null hypothesis is true.</li>
<li>Signiicance level and critical value一一对应</li>
</ul>
<h4 id="Economic-versus-Statistical-Signiicance"><a href="#Economic-versus-Statistical-Signiicance" class="headerlink" title="Economic versus Statistical Signiicance"></a>Economic versus Statistical Signiicance</h4><ul>
<li>The statistical significance of a variable $x_j$ is determined entirely by the size of $t_{\hat{\beta}_j}$, whereas the economic significance or practical significance of a variable is related to the size (and sign) of $\hat{\beta}_j$.</li>
</ul>
<ul>
<li>We often care about both statistical significance and economic significance.</li>
</ul>
<h3 id="Confidence-interval"><a href="#Confidence-interval" class="headerlink" title="Confidence interval"></a>Confidence interval</h3><ul>
<li>We can construct a confidence level depending on $\alpha$. We call it a $(1-\alpha)$ confidence interval:$$[\hat{\beta}_j-c \cdot \operatorname{se}(\hat{\beta}_j), \hat{\beta}_j+c \cdot \operatorname{se}(\hat{\beta}_j)]$$</li>
<li>The critical value $c$ is the $(1-\alpha &#x2F; 2)$ percentile in a $\mathrm{t}$ distribution with $d f&#x3D;N-k-1$.</li>
<li>The meaning of a 95% conidence interval: if we sample repeatedly many times, then the true $β_j$ will appear in 95% of the confidence intervals. </li>
<li>对于很多次取样来说的可能性，但对于某一次特定的取样不能确定是否一定在置信区间里面。</li>
</ul>
<p><strong>三种方法一样：</strong></p>
<ol>
<li>Fix a significance level $\alpha$, calculate the critical value $c$, and then reject $H_0$ if $|t_{\hat{\beta}_j}|&gt;c$.</li>
<li>Fix a significance level $\alpha$, calculate the $\mathrm{p}$-value, reject $H_0$ if $p&lt;\alpha$.</li>
<li>reject if 0 is not in the confidence level.</li>
</ol>
<h3 id="Testing-Multiple-Linear-Restrictions-The-F-Test"><a href="#Testing-Multiple-Linear-Restrictions-The-F-Test" class="headerlink" title="Testing Multiple Linear Restrictions: The F Test"></a>Testing Multiple Linear Restrictions: The F Test</h3><ul>
<li>$$y&#x3D;\beta_0+\beta_1 x_1+\beta_2 x_2+\beta_3 x_3+u$$We want to test$$H_0: \quad \beta_1&#x3D;0 \text { and } \beta_2&#x3D;0$$$$H_1: H_0\text{ is not true.}$$ </li>
<li>Method:<ul>
<li>Consider the restricted model when $H_0$ is true$$y&#x3D;\gamma_0+\gamma_3 x_3+u$$</li>
<li>If $H_0$ is true, the two models are the same. That means when we include $x_1$ and $x_2$ into the model, the sum of squared residuals should not change much.</li>
<li>However, if $H_0$ is false that means that at least one of $\beta_1, \beta_2$ is nonzero and the sum of squared residuals should fall when we include these new variables</li>
<li>看SSR是否相等</li>
</ul>
</li>
</ul>
<ul>
<li>F-test<ul>
<li>$$F \equiv \frac{(S S R_r-S S R_{u r}) &#x2F; q}{S S R_{u r} &#x2F;(N-k-1)}&#x3D; \frac{(R_{u r}^2-R_r^2) &#x2F; q}{(1-R_{u r}^2) &#x2F;(N-k-1)}$$</li>
<li>$q$ is the number of linear restrictions, which is the difference in degrees of freedom in the restricted model versus the unrestricted model.</li>
<li>$S S R_r$ is the sum of squared residuals from the restricted model and $S S R_{u r}$ is the sum of squared residuals from the unrestricted model.</li>
<li>Since $S S R_r$ can be no smaller than $S S R_{u r}$, the $\mathrm{F}$ statistic is always nonnegative.</li>
<li>We can show that the sampling distribution of the F-stat: $F \sim F_{q, N-k-1}$. We call this an $\mathrm{F}$ distribution with $q$ degrees of freedom in the numerator and $N-k-1$ degrees of freedom in the denominator.</li>
<li><img src="https://cdn.jsdelivr.net/gh/ldvyyc/ImgBed/20230408191204.png" alt="F-test 5%"></li>
</ul>
</li>
<li>t分布的平方就是F分布，因此单变量也可以用F分布。</li>
<li>In the $\mathrm{F}$ testing context, the $\mathrm{p}$-value is defined as$$P(\mathcal{F}&gt;F) $$where $\mathcal{F}$ denote an $\mathrm{F}$ random variable with $(q, N-k-1)$ degrees of freedom, and $\mathrm{F}$ is the actual value of the test statistic.</li>
<li>p-value is the probability of observing a value of $\mathrm{F}$ at least as large as we did, given that the null hypothesis is true.<ul>
<li>$\rightarrow$ Reject $H_0$ if $p&lt;\alpha$</li>
</ul>
</li>
</ul>
<ul>
<li>通常情况下使用SSR形式的F检验比较好，因为有时候restricted的形式与unrestricted不同，不能直接用R2来计算。</li>
</ul>
<h3 id="Testing-Multiple-Linear-Restrictions-The-LM-statistic"><a href="#Testing-Multiple-Linear-Restrictions-The-LM-statistic" class="headerlink" title="Testing Multiple Linear Restrictions: The LM statistic"></a>Testing Multiple Linear Restrictions: The LM statistic</h3><ul>
<li>Lagrange multiplier （LM） statistic</li>
<li>The LM statistic can be used in testing multiple exclusion restrictions （as in an $F$ test） under large sample.</li>
<li>对于模型$$y&#x3D;\beta_0+\beta_1 x_1+\ldots+\beta_k x_k+u$$We want to test whether the last $q$ of these variables all have zero population parameters:$$H_0: \beta_{k-q+1}&#x3D;\beta_{k-q+2}&#x3D;\ldots&#x3D;\beta_k&#x3D;0$$</li>
</ul>
<ul>
<li>$L M$ statistic</li>
<li>First estimate the restricted model:$$y&#x3D;\tilde{\beta_0}+\tilde{\beta_1} x_1+\cdots+\tilde{\beta_{k-q}} x_{k-q}+\tilde{u}$$If the coefficients of the excluded independent variables $x_{k-q+1}$ to $x_k$ are truly zero in the population model, then they should be uncorrelated to $\tilde{u}$.</li>
<li>So regress $\tilde{u}$ on all $x$$$\tilde{u} \sim x_1, x_2, \ldots, x_k$$Let $R_u^2$ denote the R-squared of this regression. The smaller the $R_u^2$, the more likely $H_0$ is true. So a large $R_u^2$ provides evidence against $H_0$.</li>
<li>$L M&#x3D;N \cdot R_u^2$. We can show that $L M$ follows chi-square distribution with $q$ degrees of freedom: $\mathcal{X}_q^2$.<ul>
<li>Reject $H_0$ if $L M&gt;$ critical value $(p&lt;$ significance level)</li>
<li><img src="https://cdn.mathpix.com/snip/images/X3leSxpzRqmmLAR3CZWjQs6eNsBj0o1ySEyLiIXgqNI.original.fullsize.png" alt="chi-square"></li>
</ul>
</li>
<li>在大样本时，LM和F检验结果很相似</li>
</ul>
<h2 id="Ch5-Multiple-Regression-Analysis-OLS-Asymptotics"><a href="#Ch5-Multiple-Regression-Analysis-OLS-Asymptotics" class="headerlink" title="Ch5 Multiple Regression Analysis: OLS Asymptotics"></a>Ch5 Multiple Regression Analysis: OLS Asymptotics</h2><h3 id="Asymptotic-Properties"><a href="#Asymptotic-Properties" class="headerlink" title="Asymptotic Properties"></a>Asymptotic Properties</h3><ul>
<li>Finite sample properties: properties hold for any sample of data.</li>
<li>Examples<ul>
<li>Unbiasedness of OLS</li>
<li>OLS is BLUE</li>
<li>Sampling distribution of the OLS estimators</li>
</ul>
</li>
<li>Asymptotic properties or large sample properties: not defined for a particular sample size; rather, they are defined as the sample size grows without bound.<ul>
<li>渐近性质</li>
</ul>
</li>
</ul>
<h3 id="Consistency"><a href="#Consistency" class="headerlink" title="Consistency"></a>Consistency</h3><ul>
<li>一致性</li>
<li>Let $W_N$ be an estimator of $\theta$ based on a sample $Y_1, Y_2, \ldots, Y_N$ of size $N$. Then, $W_N$ is a consistent estimator of $\theta$ if for every $\epsilon&gt;0$$$P(|W_N-\theta|&gt;\epsilon) \rightarrow 0 \text { as } N \rightarrow \infty .$$</li>
<li>We also say consistency means:$$\operatorname{plim}(W_N)&#x3D;\theta$$<ul>
<li>Intuitively, consistency means when the sample size becomes larger, the estimator gets closer and closer to the true value.</li>
</ul>
</li>
<li><strong>一致性和无偏性没有必然联系</strong></li>
</ul>
<h4 id="Consistency-of-OLS"><a href="#Consistency-of-OLS" class="headerlink" title="Consistency of OLS"></a>Consistency of OLS</h4><ul>
<li>Under Assumptions MLR.1 through MLR.4, the OLS estimator $\hat{\beta}_j$ is consistent for $\beta_j$, for all $j&#x3D;0,1, \ldots, k$.</li>
</ul>
<ul>
<li>When the sample size is larger, the OLS estimator is centered around the true parameter closer and closer.</li>
</ul>
<h4 id="Central-Limit-Theorem"><a href="#Central-Limit-Theorem" class="headerlink" title="Central Limit Theorem"></a>Central Limit Theorem</h4><ul>
<li>Use the notation$$\hat{\theta}_N \stackrel{a}{\sim} N(0, \sigma^2)$$to mean that as the sample size $N$ gets larger, $\hat{\theta}_N$ is approximately normally distributed with mean 0 and variance $\sigma^2$.</li>
<li><strong>Central Limit Theorem</strong><ul>
<li>Let ${Y_1, Y_2, \ldots, Y_N}$ be a random sample with mean $\mu$ and variance $\sigma^2$. Then,$$Z_N&#x3D;\frac{\bar{Y}_N-\mu}{\sigma &#x2F; \sqrt{N}} \stackrel{a}{\sim} N(0,1)$$</li>
<li>Intuitively, it means when the sample size gets larger, the distribution of the sample average is closer to a normal distribution.</li>
<li>不管Y的分布如何，当样本量足够大，都会趋向于正态分布</li>
</ul>
</li>
</ul>
<h3 id="Asymptotic-Normality-of-OLS"><a href="#Asymptotic-Normality-of-OLS" class="headerlink" title="Asymptotic Normality of OLS"></a>Asymptotic Normality of OLS</h3><ul>
<li>Under the Gauss-Markov Assumptions MLR.1 through MLR. 5 , for each $j&#x3D;0,1, \ldots, k$</li>
<li>$$\begin{aligned}<br>&amp; \frac{\hat{\beta}_j-\beta_j}{s d(\hat{\beta}_j)} \stackrel{a}{\sim} \operatorname{Normal}(0,1) . \\<br>&amp; \frac{\hat{\beta}_j-\beta_j}{\operatorname{se}(\hat{\beta}_j)} \stackrel{a}{\sim} \operatorname{Normal}(0,1) .<br>\end{aligned}$$</li>
<li>OLS estimators are approximately normally distributed in large enough sample sizes.</li>
<li>这个定理说明当样本量足够大的时候，不需要u的正态分布假定。</li>
</ul>
<h3 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h3><ul>
<li>Under MLR.1-MLR.4, OLS estimators are consistent. </li>
<li>Under MLR.1-MLR.5, OLS estimators have an asymptotic normal distribution.</li>
</ul>
<h2 id="Ch6-Multiple-Regression-Analysis-Further-Issues"><a href="#Ch6-Multiple-Regression-Analysis-Further-Issues" class="headerlink" title="Ch6 Multiple Regression Analysis: Further Issues"></a>Ch6 Multiple Regression Analysis: Further Issues</h2><h3 id="Efects-of-Data-Scaling-on-OLS-Statistics"><a href="#Efects-of-Data-Scaling-on-OLS-Statistics" class="headerlink" title="Efects of Data Scaling on OLS Statistics"></a>Efects of Data Scaling on OLS Statistics</h3><h4 id="changing-unit-of-measurement"><a href="#changing-unit-of-measurement" class="headerlink" title="changing unit of measurement"></a>changing unit of measurement</h4><ul>
<li>Consider the simple regression model:$$y&#x3D;\beta_0+\beta_1 x+u$$</li>
<li>Now suppose $y^*&#x3D;w_1 y$ and $x^*&#x3D;w_2 x$, Then for this model:$$y^*&#x3D;\beta_0^*+\beta_1^* x^*+u$$</li>
<li>$\hat{\beta}_0^*$ and $\hat{\beta}_0$, and $\hat{\beta}_1^*$ and $\hat{\beta}_1$ 的关系是？<ul>
<li>$$\hat{\beta}_0^*&#x3D;w_1 \hat{\beta}_0, \quad \hat{\beta}_1^*&#x3D;\frac{w_1}{w_2} \hat{\beta}_1$$</li>
<li>$$\operatorname{se}(\hat{\beta}_0^*) &#x3D;w_1 \operatorname{se}(\hat{\beta}_0), \quad\operatorname{se}(\hat{\beta}_1^*) &#x3D;\frac{w_1}{w_2}\operatorname{se}(\hat{\beta}_1)$$</li>
<li>$$t_\hat{\beta_0}^*&#x3D;t_\hat{\beta_0} \quad t_\hat{\beta_1}^* &#x3D;t_\hat{\beta_1}$$</li>
<li>$$R^{2*}&#x3D;R^2$$</li>
<li>the statistical signiicance does not change.</li>
</ul>
</li>
</ul>
<h4 id="Unit-Change-in-Logarithmic-Form"><a href="#Unit-Change-in-Logarithmic-Form" class="headerlink" title="Unit Change in Logarithmic Form"></a>Unit Change in Logarithmic Form</h4><ul>
<li>只影响截距，不影响系数</li>
</ul>
<h4 id="Beta-Coefficients"><a href="#Beta-Coefficients" class="headerlink" title="Beta Coefficients"></a>Beta Coefficients</h4><ul>
<li>Sometimes, it’s useful to obtain regression results when all variables are standardized: subtracting off its mean and dividing by its standard deviation.</li>
<li>$$<br>\begin{aligned}<br>y_i &amp; &#x3D;\hat{\beta_0}+\hat{\beta_1} x_{i 1}+\cdots+\hat{\beta_k} x_{i k}+\hat{u_i} . \\<br>(y_i-\bar{y}) &#x2F; \hat{\sigma_y} &amp; &#x3D;(\hat{\sigma_1} &#x2F; \hat{\sigma_y}) \hat{\beta_1}[(x_{i 1}-\bar{x_1}) &#x2F; \hat{\sigma_1}]+\cdots \\<br>&amp; +(\hat{\sigma_k} &#x2F; \hat{\sigma_y}) \hat{\beta_k}[(x_{i k}-\bar{x_k}) &#x2F; \hat{\sigma_k}]+(\hat{u_i} &#x2F; \hat{\sigma_y}) \\<br>z_y &amp; &#x3D;\hat{b_1} z_1+\cdots+\hat{b_k} z_k+\text { error }<br>\end{aligned}<br>$$</li>
<li>where $z_y$ denotes the z-score of $y$. The new coefficients are$$\hat{b}_j&#x3D;(\hat{\sigma}_j &#x2F; \hat{\sigma}_y) \hat{\beta}_j$$</li>
<li>If $x_1$ increases by one standard deviation, then $\hat{y}$ changes by $\hat{b}_1$ standard deviation.</li>
<li>归一化了</li>
</ul>
<h3 id="More-on-Functional-Form"><a href="#More-on-Functional-Form" class="headerlink" title="More on Functional Form"></a>More on Functional Form</h3><ul>
<li>对于log形式 $$z&#x3D;log(y)&#x3D;\beta_0+\beta_1 x+u$$<ul>
<li>当x变化$\Delta$ 时，$$\%\Delta E(y|x)&#x3D;100[exp(\beta_1\Delta)-1]$$</li>
<li>当 $\Delta$ 趋近0时，$$\%\Delta E(y|x)\approx 100\beta_1\Delta$$</li>
</ul>
</li>
<li>对于x取值小于0的，可以使用 inverse hyperbolic sine: $$IRS(x)&#x3D;arcsinh(x)&#x3D;log(x+\sqrt{x^2+1})$$</li>
<li>当x对y的影响是非线性的，可以考虑二次方。</li>
</ul>
<h3 id="More-on-Goodness-of-Fit"><a href="#More-on-Goodness-of-Fit" class="headerlink" title="More on Goodness of Fit"></a>More on Goodness of Fit</h3><ul>
<li>在Ch4中通过F检验来判断是否可以restrict模型，那么对于non-nested model怎么办呢？</li>
<li>例如： $$\begin{aligned}<br>&amp; y&#x3D;\beta_0+\beta_1 x_1+\beta_2 x_2+u \\<br>&amp; y&#x3D;\gamma_0+\gamma_1 x_4+e<br>\end{aligned}$$</li>
<li>这时候需要用 Adjusted R-square<ul>
<li>选择 $\bar{R}^2$ 最高的</li>
</ul>
</li>
</ul>
<h3 id="Prediction-Analysis"><a href="#Prediction-Analysis" class="headerlink" title="Prediction Analysis"></a>Prediction Analysis</h3><h4 id="confidence-interval-for-E-y-x"><a href="#confidence-interval-for-E-y-x" class="headerlink" title="confidence interval for E(y|x)"></a>confidence interval for E(y|x)</h4><ul>
<li>Suppose we have estimated the equation$$\hat{y}&#x3D;\hat{\beta}_0+\hat{\beta}_1 x_1+\hat{\beta}_2 x_2+\ldots+\hat{\beta}_k x_k$$Let $c_1, c_2, \ldots, c_k$ denote particular values for each of the $k$ independent variables.</li>
<li>The parameter we would like to estimate is$(\theta)&#x3D;E(y \mid x_1&#x3D;c_1, \ldots, x_k&#x3D;c_k)&#x3D;\beta_0+\beta_1 c_1+\beta_2 c_2+\ldots+\beta_k c_k$</li>
<li>The estimator of $\theta$ is$$\hat{\theta}&#x3D;\hat{\beta}_0+\hat{\beta}_1 c_1+\hat{\beta}_2 c_2+\ldots+\hat{\beta}_k c_k$$</li>
<li>$$y&#x3D;\theta+\beta_1(x_1-c_1)+\beta_2(x_2-c_2)+\ldots+\beta_k(x_k-c_k)+u$$</li>
</ul>
<ul>
<li>So we can regress $y_i$ on $(x_{i 1}-c_1), \ldots,(x_{i k}-c_k)$. The standard error and confidence interval of the intercept of this new regression is what we need.</li>
</ul>
<h4 id="Prediction-Interval"><a href="#Prediction-Interval" class="headerlink" title="Prediction Interval"></a>Prediction Interval</h4><ul>
<li>$$y&#x3D;E(y \mid x_1, \ldots, x_k)+u$$</li>
<li>The previous method form a confidence interval for $E(y \mid x_1, \ldots, x_k)$.</li>
</ul>
<ul>
<li>Sometimes we are interested in forming the confidence interval for an unknown outcome on $y$.</li>
<li>We need to account for the variation in $u$.</li>
</ul>
<ul>
<li>Let $x_1^0, \ldots, x_k^0$ be the new vales of the independent variables, which we assume we observe. Let $u^0$ be the unobserved error.<br>$$<br>y^0&#x3D;\beta_0+\beta_1 x_1^0+\ldots+\beta_k x_k^0+u^0 .<br>$$</li>
<li>Our best prediction of $y^0$ is estimated from the OLS regression line<br>$$<br>\hat{y}^0&#x3D;\hat{\beta}_0+\hat{\beta}_1 x_1^0+\ldots+\hat{\beta}_k x_k^0<br>$$</li>
<li>The prediction error in using $\hat{y}^0$ to predict $y^0$ is</li>
<li>Note $E(\hat{y}^0)&#x3D;y^0$, because the $\hat{\beta}_j$ are unbiased. Because $u^0$ has zero mean, $E\left(\hat{e}^0\right)&#x3D;0$.</li>
<li>Note that $u^0$ is uncorrelated with each $\hat{\beta}_j$, because $u^0$ is uncorrelated with the errors in the sample used to obtain the $\hat{\beta}_j$.</li>
</ul>
<ul>
<li>Therefore, the variance of the prediction error (conditional on all in-sample values of the independent variables) is:<br>$$<br>\operatorname{Var}(\hat{e}^0)&#x3D;\operatorname{Var}(\hat{y}^0)+\operatorname{Var}(u^0)&#x3D;\operatorname{Var}(\hat{y}^0)+\sigma^2 .<br>$$</li>
</ul>
<ul>
<li>The standard error of $\hat{e}^0$ is:$$se(\hat{e}^0)&#x3D;{[se(\hat{y}^0)]^2+\hat{\sigma}^2}^{1 &#x2F; 2}$$</li>
<li>The prediction interval for $y^0$ is<br>$$<br>\sqrt{\hat{y}^0 \pm c \cdot s e\left(\hat{e}^0\right)}<br>$$</li>
</ul>
<h2 id="Ch7-Multiple-Regression-Analysis-with-Qualitative-Information"><a href="#Ch7-Multiple-Regression-Analysis-with-Qualitative-Information" class="headerlink" title="Ch7 Multiple Regression Analysis with Qualitative Information"></a>Ch7 Multiple Regression Analysis with Qualitative Information</h2><h3 id="A-Single-Dummy-Independent-Variable"><a href="#A-Single-Dummy-Independent-Variable" class="headerlink" title="A Single Dummy Independent Variable"></a>A Single Dummy Independent Variable</h3><ul>
<li><p>We often capture binary information by defining binary variable or a zero-one variable.$$\text { female }&#x3D; \begin{cases}0, &amp; \text { if the individual is man } \\ 1, &amp; \text { if the individual is woman }\end{cases}$$</p>
</li>
<li><p>zero-one leads to natural interpretations of the regression parameters</p>
</li>
<li><p>假设 $$\text { wage }&#x3D;\beta_0+\delta_0 \text { female }+u$$</p>
</li>
<li><p>If we estimate the model using OLS$$\begin{aligned}<br>&amp; \hat{\beta_0}&#x3D;\overline{w a g e_{m e n}} \\<br>&amp; \hat{\delta_0}&#x3D;\overline{w a g e_{women}}-\overline{w a g e_{m e n}}\end{aligned}$$</p>
</li>
<li><p>If we regress $y$ on a dummy variable $x$, then the OLS estimate of the intercept represents the sample average of $y$ when $x&#x3D;0$, the OLS estimate of the slope coefficient represents the difference between the sample average of $y$ when $x&#x3D;1$ and $x&#x3D;0$.</p>
</li>
<li><p>当增加变量时，例如 $$w a g e&#x3D;\beta_0+\delta_0 \text { female }+\beta_1 e d u c+u$$</p>
</li>
<li><p>$δ_0$ is the difference in hourly wage between women and men, given the same amount of education.</p>
</li>
</ul>
<h4 id="线性相关"><a href="#线性相关" class="headerlink" title="线性相关"></a>线性相关</h4><ul>
<li>$wage&#x3D;\beta_0 + \beta_1female+u$ 是可以的<ul>
<li>选定了 male 作为 baseline group</li>
</ul>
</li>
<li>$wage&#x3D;\beta_0 male + \beta_1female+u$ 是可以的</li>
<li>$wage&#x3D;\beta_0+\beta_1 male + \beta_2female+u$ 是不行的</li>
</ul>
<h4 id="Without-intercept"><a href="#Without-intercept" class="headerlink" title="Without intercept"></a>Without intercept</h4><ul>
<li>$wage&#x3D;\beta_0 male + \beta_1female+u$ 没有截距，在解释和计算检验的时候不方便，并且 $R^2$ 可能是负的。</li>
<li>In general, if there is no intercept in the regression model, the $R^2$ could be negative.</li>
<li>To address the issue, some researchers use the <strong>uncentered R-squared</strong> when there is no intercept in the model$$R_0^2&#x3D;1-\frac{S S R}{S S T_0},$$where $S S T_0&#x3D;\sum_{i&#x3D;1}^N y_i^2$.</li>
</ul>
<h3 id="Using-Dummy-Variables-for-Multiple-Categories"><a href="#Using-Dummy-Variables-for-Multiple-Categories" class="headerlink" title="Using Dummy Variables for Multiple Categories"></a>Using Dummy Variables for Multiple Categories</h3><ul>
<li><p>多个组别的时候，两种选择</p>
</li>
<li><p>第一种，k-1个独立的变量：</p>
<ul>
<li>$$\text { wage }&#x3D;\beta_0+\beta_1 \text { marrmale }+\beta_2 \text { marrfemale }+\beta_3 \text { singfem }+u \text {. }$$</li>
</ul>
</li>
<li><p>第二种，乘积项：</p>
<ul>
<li>$$\text { wage }&#x3D;\beta_0+\beta_1 \text { female }+\beta_2 \text { married }+\beta_3 \text { female } \cdot \text { married }+u$$</li>
</ul>
</li>
<li><p>注意如果一个变量只能在几个离散值之间选择，最好把每个值的情况独立成一个哑元，否则相当于暗示了斜率变化是线性的。</p>
<ul>
<li>例如CR可以取0，1，2，3，4</li>
<li>$$MBR&#x3D;\beta_0+\beta_1 C R+\text { other factors }+u \text {. }$$</li>
<li>$$MBR&#x3D;\beta_0+\delta_1 C R 1+\delta_2 C R 2+\delta_3 C R 3+\delta_4 C R 4+\text{other factors}+u$$</li>
<li>第二种模型更好。</li>
</ul>
</li>
</ul>
<h3 id="Interactions-Involving-Dummy-Variables"><a href="#Interactions-Involving-Dummy-Variables" class="headerlink" title="Interactions Involving Dummy Variables"></a>Interactions Involving Dummy Variables</h3><ul>
<li>在 $wage&#x3D;\beta_0+\beta_1female+\beta_2educ+u$ 中我们假定了 educ 对于男女的影响是相同的。</li>
<li>为了区别，需要添加一个乘积项：$$E(\text { wage } \mid \text { female }, \text { educ })&#x3D;\beta_0+\delta_0 \text { female }+\beta_1 \text { educ }+\delta_1 \text { female } \cdot \text { educ. }$$</li>
</ul>
<h4 id="Testing-for-Differences-in-Regression-Functions-across-Groups"><a href="#Testing-for-Differences-in-Regression-Functions-across-Groups" class="headerlink" title="Testing for Differences in Regression Functions across Groups"></a>Testing for Differences in Regression Functions across Groups</h4><ul>
<li>$$\text { wage }&#x3D;\beta_0+\beta_1 \text { educ }+\beta_2 \text { exper }+\beta_3 \text { tenure }+u$$</li>
</ul>
<ul>
<li>We want to test whether all the coefficients are the same for men and women.</li>
<li>We can include interactive terms for all variables:$$<br>\begin{aligned}<br>\text { wage }&#x3D; &amp; \beta_0+\delta_0 \text { female }+\beta_1 \text { educ }+\delta_1 \text { educ } \cdot \text { female }+ \\<br>&amp; \beta_2 \text { exper }+\delta_2 \text { exper } \cdot \text { female }+ \\<br>&amp; \beta_3 \text { tenure }+\delta_3 \text { tenure } \cdot \text { female }+u .<br>\end{aligned}$$</li>
</ul>
<ul>
<li>The null hypothesis:$$H_0: \delta_0&#x3D;0, \delta_1&#x3D;0, \delta_2&#x3D;0, \delta_3&#x3D;0$$We can use F test to test the hypothesis: estiamte the unrestricted and restricted model, and then calculate the F-stat.</li>
</ul>
<h4 id="Chow-statistic"><a href="#Chow-statistic" class="headerlink" title="Chow statistic"></a>Chow statistic</h4><ul>
<li>对于只有一个二元变量和很多其他连续变量的回归，我们想判断其他所有的变量是否关于两组完全相同</li>
<li>We can show that the sum of squared residuals from the unrestricted model can be obtained from two separate regressions, one for each group: $S S R_{u r}&#x3D;S S R_1+S S R_2$</li>
<li>The F-statstic:$$F&#x3D;\frac{S S R_p-(S S R_1+S S R_2)}{S S R_1+S S R_2} \cdot \frac{N-2(k+1)}{k+1}$$$S S R_p$ : SSR from pooling the groups and estimating a single equation. </li>
<li>This is also called a Chow statistic.</li>
<li>Note: use the Chow test if<ul>
<li>the model satisfies homoskedasticity</li>
<li>we want to test no differences at all between the groups</li>
</ul>
</li>
</ul>
<h3 id="Program-Evaluation"><a href="#Program-Evaluation" class="headerlink" title="Program Evaluation"></a>Program Evaluation</h3><ul>
<li>在社会学实验中控制变量法</li>
</ul>
<h2 id="Ch8-Heteroskedasticity"><a href="#Ch8-Heteroskedasticity" class="headerlink" title="Ch8 Heteroskedasticity"></a>Ch8 Heteroskedasticity</h2><h3 id="Consequence-of-Heteroskedasticity-for-OLS"><a href="#Consequence-of-Heteroskedasticity-for-OLS" class="headerlink" title="Consequence of Heteroskedasticity for OLS"></a>Consequence of Heteroskedasticity for OLS</h3><ul>
<li>Heteroskedasticity does not cause bias or inconsistency in the OLS estimators<ul>
<li>对于一致性和无偏性无影响</li>
</ul>
</li>
<li>The interpretation of our goodness-of-fit measures is also unaffected by the presence of heteroskedasticity.<ul>
<li>对于goodness of fit 无影响</li>
</ul>
<ul>
<li>$R^2$ and adj- $R^2$ are different ways of estimating the population R-squared, $1-\sigma_u^2 &#x2F; \sigma_y^2$.</li>
<li>both variances in the population $R^2$ are unconditional variances</li>
<li>SSR&#x2F; $N$ consistently estimates $\sigma_u^2$, and $S S T &#x2F; N$ consistently estimates $\sigma_y^2$, whether or $\operatorname{not} \operatorname{Var}(u \mid x)$ is constant</li>
</ul>
</li>
</ul>
<ul>
<li>With heteroskedasticity, $\operatorname{Var}\left(\hat{\beta}_j\right)$ is biased.<ul>
<li>对于方差有影响</li>
<li>标准差，t数据，置信区间都不再可靠</li>
<li>大样本也不能解决</li>
<li>OLS is no longer BLUE.</li>
</ul>
</li>
</ul>
<h3 id="Heteroskedasticity-Robust-Inference-after-OLS-Estimation"><a href="#Heteroskedasticity-Robust-Inference-after-OLS-Estimation" class="headerlink" title="Heteroskedasticity-Robust Inference after OLS Estimation"></a>Heteroskedasticity-Robust Inference after OLS Estimation</h3><ul>
<li>Consider the simple linear regression model:$$y_i&#x3D;\beta_0+\beta_1 x_i+u_i$$Assume SLR.1-SLR.4 are satisfied, and there exists heteroskedasticity:$$\operatorname{Var}(u \mid x_i)&#x3D;\sigma_i^2$$$\operatorname{Var}(u)$ takes on different values when $x$ varies</li>
</ul>
<ul>
<li>We don’t know the exact functional form of $\sigma_i^2$, it can be any function of $x$</li>
</ul>
<h4 id="Estimating-operatorname-Var-left-hat-beta-j-right-under-Heteroskedasticity"><a href="#Estimating-operatorname-Var-left-hat-beta-j-right-under-Heteroskedasticity" class="headerlink" title="Estimating $\operatorname{Var}\left(\hat{\beta}_j\right)$ under Heteroskedasticity"></a>Estimating $\operatorname{Var}\left(\hat{\beta}_j\right)$ under Heteroskedasticity</h4><ul>
<li>One valid estimator （White,1980）:$$\widehat{\operatorname{Var}}(\hat{\beta_1})&#x3D;\frac{\sum_{i&#x3D;1}^N(x_i-\bar{x})^2 \hat{u_i}^2}{[\sum_{i&#x3D;1}^N(x_i-\bar{x})^2]^2} \equiv \frac{\sum_{i&#x3D;1}^N(x_i-\bar{x})^2 \hat{u_i}^2}{SST_x^2}$$where $$SST_x&#x3D;\sum_{i&#x3D;1}^N(x_i-\bar{x})^2$$.</li>
<li>For multiple regression model:$$\begin{gathered}y_i&#x3D;\beta_0+\beta_1 x_{i 1}+\beta_2 x_{i 2}+\ldots+\beta_k x_{i k}+u_i . \\ \operatorname{Var}(\hat{\beta_j})&#x3D;\frac{\sum_{i&#x3D;1}^N \hat{r_{ij}}^2 \sigma_i^2}{[\sum_{i&#x3D;1}^N \hat{r_{ij}}^2]^2} \equiv \frac{\sum_{i&#x3D;1}^N \hat{r_{ij}}^2 \sigma_i^2}{SSR_j^2}\end{gathered}$$The estimator:$$\widehat{\operatorname{Var}}(\hat{\beta_j})&#x3D;\frac{\sum_{i&#x3D;1}^N \hat{r_{ij}}^2 \hat{u_i}^2}{[\sum_{i&#x3D;1}^N \hat{r_{ij}}^2]^2}&#x3D;\frac{\sum_{i&#x3D;1}^N \hat{r_{ij}}^2 \hat{u_i}^2}{SSR_j^2}$$<ul>
<li>$\hat{r_{ij}}$ is the residual from regressing $x_j$ on all other independent variables</li>
<li>$S S R_j$ is the sum of residual squared of this regression</li>
<li>The square root of $\widehat{\operatorname{Var}}\left(\hat{\beta}_j\right)$ is called the heteroskedasticity-robust standard error, or simply, robust standard errors.</li>
</ul>
</li>
<li>Robust-standard error 是一致的</li>
</ul>
<h4 id="Compare-the-variance-formula"><a href="#Compare-the-variance-formula" class="headerlink" title="Compare the variance formula"></a>Compare the variance formula</h4><ul>
<li>Under homoskedasticity, $\operatorname{Var}(\hat{\beta_1})$ is simplified as$$\operatorname{Var}(\hat{\beta_j})&#x3D;\frac{\sum_{i&#x3D;1}^N \hat{r_{ij}}^2 \sigma_i^2}{SSR_j^2}&#x3D;\frac{\sigma^2}{SSR_j}$$</li>
<li>Under heteroskedasticity,$$\operatorname{Var}(\hat{\beta_j})&#x3D;\frac{\sum_{i&#x3D;1}^N r_{i j}^2 \sigma_i^2}{SSR_j^2}&#x3D;\frac{1}{SSR_j} \sum_{i&#x3D;1}^N \frac{\hat{r_{ij}}^2}{SSR_j} \sigma_i^2&#x3D;\frac{1}{SSR_j} \sum_{i&#x3D;1}^N w_{ij} \sigma_i^2$$where $w_{ij}&#x3D;\frac{\hat{\tau_{ij}}^2}{S S R_j}$. We know that $w_{ij}&gt;0$ and $\sum_{i&#x3D;1}^N w_{ij}&#x3D;1$.</li>
<li>即，进行了加权平均。</li>
<li>Robust standard errors can be either larger or smaller than the usual standard errors.</li>
</ul>
<h4 id="More-on-RSE"><a href="#More-on-RSE" class="headerlink" title="More on RSE"></a>More on RSE</h4><ul>
<li>在有些情况下，特别是异方差性不强的情况下，robust-standard-error的表现不如传统的standard-error<ul>
<li>小样本时rse存在误差</li>
<li>rse的样本方差更大</li>
</ul>
</li>
<li>在实践中通常在大样本时报告rse，在小样本时都报告。</li>
</ul>
<h3 id="Weighted-Least-Squares-Estimation"><a href="#Weighted-Least-Squares-Estimation" class="headerlink" title="Weighted Least Squares Estimation"></a>Weighted Least Squares Estimation</h3><h4 id="Generalized-Least-Squares-（GLS）"><a href="#Generalized-Least-Squares-（GLS）" class="headerlink" title="Generalized Least Squares （GLS）"></a>Generalized Least Squares （GLS）</h4><ul>
<li>Assume MLR.1-MLR.4 are satisfied:$$y_i&#x3D;\beta_0+\beta_1 x_{i 1}+\ldots+\beta_k x_{i k}+u_i$$</li>
<li>Assume that the variance of $u$ takes the following form:$$\operatorname{Var}(u \mid x_1, \ldots, x_k)&#x3D;\sigma^2 h(x_1, \ldots, x_k)$$</li>
<li>We write $\sigma_i^2&#x3D;\sigma^2 h\left(x_{i 1}, \ldots, x_{i k}\right)&#x3D;\sigma^2 h_i$.</li>
</ul>
<ul>
<li>Consider an alternative regression model:$$\frac{y_i}{\sqrt{h_i}}&#x3D;\beta_0 \frac{1}{\sqrt{h_i}}+\beta_1 \frac{x_{i 1}}{\sqrt{h_i}}+\ldots+\beta_k \frac{x_{i k}}{\sqrt{h_i}}+\frac{u_i}{\sqrt{h_i}}$$</li>
</ul>
<ul>
<li>Let $\mathbf{x}$ denote all the explanatory variables. Conditional on $\mathbf{x}, E\left(u_i &#x2F; \sqrt{h_i} \mid \mathbf{x}\right)&#x3D;E\left(u_i \mid \mathbf{x}\right) &#x2F; \sqrt{h_i}&#x3D;0$.</li>
<li>$\operatorname{Var}\left(u_i &#x2F; \sqrt{h_i} \mid \mathbf{x}\right)&#x3D;\sigma^2$, satisfying homoskedasticity.</li>
<li>Denote the OLS estimator after the transformation as ${\beta_j^*}$</li>
<li>We can prove that ${\beta_j^*}$ minimizes$$\sum_{i&#x3D;1}^N(y_i-b_0-b_1 x_{i 1}-\cdots-b_k x_{i k})^2 &#x2F; h_i$$</li>
<li>Weighted least squares estimator（WLS）: <ul>
<li>the weight for each $\hat{u}_i$ is $1 &#x2F; h_i$. We give less weight for observations with higher variance. Intuitively, they provide less information.</li>
</ul>
</li>
<li>${\beta_j^*}$ is still one estimator for the original model, and have the same interpretation</li>
<li>Because ${\beta_j^*}$ satisfies MLR.1-MLR.5, so it is BLUE under heteroskedasticity with the form $\sigma_i^2&#x3D;\sigma^2 h_i$</li>
<li>${\beta_j^*}$ is also called generalized least squares estimators （GLS）</li>
</ul>
<h4 id="Feasible-Generalized-Least-Squares-（FGLS）"><a href="#Feasible-Generalized-Least-Squares-（FGLS）" class="headerlink" title="Feasible Generalized Least Squares （FGLS）"></a>Feasible Generalized Least Squares （FGLS）</h4><ul>
<li>实际中需要估计 $h_i$</li>
</ul>
<ul>
<li>Assume $h_i$ takes the following form:$$\begin{aligned}\operatorname{Var}(u \mid x) &amp; &#x3D;\sigma^2 \exp \left(\delta_0+\delta_1 x_1+\ldots+\delta x_k\right) \\ u^2 &amp; &#x3D;\sigma^2 \exp \left(\delta_0+\delta_1 x_1+\ldots+\delta x_k\right) v,\end{aligned}$$where $v$ has a mean of one.</li>
<li>We take $\exp (\cdot)$ to guarantee that $\operatorname{Var}(u)&gt;0$</li>
<li>Equivalently,<br>$$<br>\log \left(u^2\right)&#x3D;\alpha+\delta_1 x_1+\ldots+\delta x_k+e .<br>$$</li>
</ul>
<ul>
<li>As usual, we replace the unobserved $u$ with the OLS residuals $\hat{u}$, and estimate $\log \left(\hat{u}^2\right) \sim 1, x_1, \ldots x_k$, calculate the fitted value $\hat{g}_i$. Then $\hat{h}_i&#x3D;\exp \left(\hat{g}_i\right)$.</li>
</ul>
<h5 id="Procedure"><a href="#Procedure" class="headerlink" title="Procedure"></a>Procedure</h5><ol>
<li>Run the regression of $y$ on $1, x_1, \ldots, x_k$, get the residual $\hat{u}_i$</li>
<li>Calculate $\log \left(\hat{u}_i^2\right)$</li>
<li>Estimate $\log \left(\hat{u}_i^2\right) \sim 1, x_1, \ldots x_k$, get the fitted value $\hat{g}_i$</li>
<li>Compute $\hat{h}_i&#x3D;\exp \left(\hat{g}_i\right)$</li>
<li>Use $1 &#x2F; \hat{h}_i$ as weights, estimate $y \sim 1, x_1, \ldots, x_k$ using WLS.</li>
</ol>
<p>FGLS is consistent, and has smaller asymptotic variance than OLS.</p>
<h4 id="WLS-or-RSE"><a href="#WLS-or-RSE" class="headerlink" title="WLS or RSE"></a>WLS or RSE</h4><ul>
<li>There is no guarantee that WLS is more efficient than OLS.</li>
</ul>
<ul>
<li>It is alwasy advised to report robust standard errors with WLS.</li>
</ul>
<ul>
<li>two solutions for heteroskedasticity:<ul>
<li>Use OLS to estiamte the model, calculate the robust standard errors （or use the max of the conventional s.e. and robust s.e.）</li>
<li>Use FGLS to estimate the model, report conventional s.e. or robust s.e.</li>
</ul>
</li>
<li>In practice, the first method is preferred in most cases</li>
</ul>
<h3 id="Testing-for-Heteroskedasticity"><a href="#Testing-for-Heteroskedasticity" class="headerlink" title="Testing for Heteroskedasticity"></a>Testing for Heteroskedasticity</h3><h4 id="Breusch-Pagan-Test-for-Heteroskedasticity"><a href="#Breusch-Pagan-Test-for-Heteroskedasticity" class="headerlink" title="Breusch-Pagan Test for Heteroskedasticity"></a>Breusch-Pagan Test for Heteroskedasticity</h4><ul>
<li>We want to know in model $y&#x3D;\beta_0+\beta_1 x_1+. .+\beta_k x_k+u$, whether $u^2$ is correlated with $x$</li>
<li>Estimate $y&#x3D;\beta_0+\beta_1 x_1+. .+\beta_k x_k+u$, get the residual $\hat{u}$</li>
<li>Estimate the following model and get $R_{\hat{u}^2}^2$ :$$\hat{u}_i^2&#x3D;\delta_0+\delta_1 x_1+\ldots+\delta_k x_k+v$$</li>
<li>We test $H_0: \delta_1&#x3D;\ldots&#x3D;\delta_k&#x3D;0$</li>
<li>Calculate the $L M$ statistic: $N \cdot R_{\hat{u}^2}^2$; or calculate the $F$ $\operatorname{statistic}\left[R_{\hat{u}^2}^2 &#x2F; k\right] &#x2F;\left[\left(1-R_{\hat{u}^2}^2\right) &#x2F;(N-k-1)\right]$.</li>
<li>Reject homoskedasticity if<ul>
<li>test statistic $&gt;$ critical value</li>
<li>$p&lt;$ significance level</li>
</ul>
</li>
</ul>
<h4 id="The-White-Test-for-Heteroskedasticity"><a href="#The-White-Test-for-Heteroskedasticity" class="headerlink" title="The White Test for Heteroskedasticity"></a>The White Test for Heteroskedasticity</h4><ul>
<li>OLS standard errors are asymptotically valid if MLR.1-MLR.5 holds.</li>
<li>It turns out that the homoskedasticity assumption can be replaced with the weaker assumption that the squared error, $u^2$, is uncorrelated with all the independent variables $\left(x_j\right)$, the squares of the independent variables $\left(x_j^2\right)$, and all the cross products $\left(x_j x_h, \forall j \neq h\right)$.</li>
</ul>
<ul>
<li>When the model contain $k&#x3D;2$ independent variables, the White test is based on an estimation of$$\hat{u}^2&#x3D;\delta_0+\delta_1 x_1+\delta_2 x_2+\delta_3 x_1^2+\delta_4 x_2^2+\delta_5 x_1 x_2+v$$The White test for heteroskedasticity is the LM statistic for testing that all of the $\delta_j$ are zero, except for the intercept.</li>
<li>Problem: with many independent variables, we uses many degrees of freedom. Solution: use $\hat{y}^2$ :$$\hat{u}^2&#x3D;\delta_0+\delta_1 \hat{y}+\delta_2 \hat{y}^2+v$$We then use the $\mathrm{F}$ or LM statistic for the null hypothesis $H_0: \delta_0&#x3D;\delta_2&#x3D;0$.</li>
</ul>
<h2 id="Ch12-Serial-Correlation"><a href="#Ch12-Serial-Correlation" class="headerlink" title="Ch12 Serial Correlation"></a>Ch12 Serial Correlation</h2><h3 id="Serial-Correlation"><a href="#Serial-Correlation" class="headerlink" title="Serial Correlation"></a>Serial Correlation</h3><h4 id="Times-series-data"><a href="#Times-series-data" class="headerlink" title="Times series data"></a>Times series data</h4><ul>
<li>Time series data: observations on variables over time. </li>
<li>random sampling is often violated</li>
</ul>
<h4 id="Classical-Assumptions-about-Time-Series-Data"><a href="#Classical-Assumptions-about-Time-Series-Data" class="headerlink" title="Classical Assumptions about Time Series Data"></a>Classical Assumptions about Time Series Data</h4><ol>
<li>The stochastic process ${(x_{t 1}, \ldots, x_{t k}, y_t): t&#x3D;1,2, \ldots, T}$ follows the linear model:$$y_t&#x3D;\beta_0+\beta_1 x_{t 1}+\ldots+\beta_k x_{t k}+u_t$$</li>
<li>No perfect collinearity.</li>
<li>Zero conditional mean.$$E(u_t \mid \mathbf{X})&#x3D;0, t&#x3D;1,2, \ldots, T$$<ul>
<li>where $\mathbf{X}$ is the explanatory variables for all time periods.</li>
<li>$E\left(u_t \mid \mathbf{X}\right)&#x3D;0$ means both $E\left(u_t \mid x_t\right)&#x3D;0$ and also $E\left(u_t \mid x_s\right)&#x3D;0, \forall t \neq s$.</li>
</ul>
</li>
</ol>
<ul>
<li>Unbiasedness of $\mathrm{OLS}$<ul>
<li>Under assumptions TS.1, TS.2 and TS.3, the OLS estimators are unbiased and consistent.</li>
</ul>
</li>
</ul>
<h4 id="Serial-Correlation-1"><a href="#Serial-Correlation-1" class="headerlink" title="Serial Correlation"></a>Serial Correlation</h4><ul>
<li>No serial correlation assumption:$$\operatorname{Cov}((x_t-\bar{x}) u_t,(x_s-\bar{x}) u_s \mid X)&#x3D;0, \forall t \neq s$$Or$$E(u_s u_t \mid X)&#x3D;0, \forall t \neq s$$</li>
<li>For time-series data, this is often not true.</li>
</ul>
<h4 id="Auto-regression，AR"><a href="#Auto-regression，AR" class="headerlink" title="Auto-regression，AR"></a>Auto-regression，AR</h4><ul>
<li>Think about a simple regression model:$$y_t&#x3D;\beta_0+\beta_1 x_t+u_t$$</li>
<li>Assume that$$u_t&#x3D;\rho u_{t-1}+e_t, t&#x3D;1,2, \ldots, T$$where $|\rho|&lt;1$, and $e_t$ are i.i.d with $E\left(e_t\right)&#x3D;0$. This is called an autoregressive process of order one $(\operatorname{AR}(1))$.</li>
</ul>
<h5 id="Properties-of-AR"><a href="#Properties-of-AR" class="headerlink" title="Properties of AR"></a>Properties of AR</h5><ul>
<li>Because $e_t$ is i.i.d, $u_t$ will be correlated with current and past $e_t$, but not future values. If the time series has been going on forever$$u_t &#x3D;\rho u_{t-1}+e_t&#x3D;\rho^k u_{t-k}+\rho^{k-1} e_{t-(k-1)}+\ldots+e_t &#x3D;\sum_{j&#x3D;0}^{\infty} \rho^j e_{t-j}$$</li>
<li>$$E(u_t) &#x3D;E(\sum_{j&#x3D;0}^{\infty} \rho^j e_{t-j})&#x3D;\sum_{j&#x3D;0}^{\infty} \rho^j E(e_{t-j})&#x3D;0$$</li>
<li>We can show that$$\begin{aligned}<br>\operatorname{Var}(u_t) &amp; &#x3D;\operatorname{Var}(\sum_{j&#x3D;0}^{\infty} \rho^j e_{t-j})&#x3D;\sum_{j&#x3D;0}^{\infty} \rho^{2 j} \operatorname{Var}(e_{t-j}) \\<br>&amp; &#x3D;\operatorname{Var}(e_t) \sum_{j&#x3D;0}^{\infty} \rho^{2 j}&#x3D;\frac{\operatorname{Var}(e_t)}{1-\rho^2}\end{aligned}$$</li>
<li>Also$$\begin{aligned}\operatorname{Cov}(u_t, u_{t+1}) &amp; &#x3D;\operatorname{Cov}(u_t, \rho u_t+e_t)&#x3D;\rho \operatorname{Var}(u_t) \\<br>\operatorname{Cov}(u_t, u_{t+j}) &amp; &#x3D;\rho^j \operatorname{Var}(u_t)<br>\end{aligned}$$</li>
<li>Assume further that $\bar{x}&#x3D;0$ and homoskedasticity, that is $\operatorname{Var}\left(u_t \mid X\right)&#x3D;\operatorname{Var}\left(u_t\right)&#x3D;\sigma^2$. Then</li>
<li>$$<br>\begin{aligned}<br>\operatorname{Var}(\hat{\beta} \mid \mathbf{X}) &amp; &#x3D;\frac{\operatorname{Var}(\sum_{t&#x3D;1}^T x_t u_t \mid \mathbf{X})}{S S T_x^2} \\<br>&amp; &#x3D;\frac{\sum_{t&#x3D;1}^T x_t^2 \operatorname{Var}(u_t)+2 \sum_{t&#x3D;1}^{T-1} \sum_{j&#x3D;1}^{T-t} x_t x_{t+j} E(u_t u_{t+j})}{S S T_x^2} \\<br>&amp; &#x3D;\frac{\sigma^2}{S S T_x}+\frac{2 \sigma^2}{S S T_x^2} \sum_{t&#x3D;1}^{T-1} \sum_{j&#x3D;1}^{T-t} \rho^j x_t x_{t+j}<br>\end{aligned}$$</li>
</ul>
<h4 id="Consequence-of-ignore-serial-correlation"><a href="#Consequence-of-ignore-serial-correlation" class="headerlink" title="Consequence of ignore serial correlation"></a>Consequence of ignore serial correlation</h4><ul>
<li>仍然是无偏、一致的</li>
<li>但传统的方差有问题了</li>
<li>会低估方差</li>
<li>完善方法：<ol>
<li>使用FGLS</li>
<li>使用OLS，修正se</li>
</ol>
</li>
</ul>
<h5 id="FGLS"><a href="#FGLS" class="headerlink" title="FGLS"></a>FGLS</h5><ul>
<li>Assume TS.1-TS.3. Further, assume $\operatorname{Var}\left(u_t \mid X\right)&#x3D;\sigma^2$.$$<br>\begin{aligned}<br>&amp; y_t&#x3D;\beta_0+\beta_1 x_t+u_t . \\<br>&amp; u_t&#x3D;\rho u_{t-1}+e_t, t&#x3D;1,2, \ldots, T .<br>\end{aligned}$$<ul>
<li>where $e_t$ is i.i.d and $E\left(e_t\right)&#x3D;0$.</li>
</ul>
</li>
<li>Transform the regression:$$\begin{aligned}<br>y_t-\rho y_{t-1} &amp; &#x3D;(1-\rho) \beta_0+\beta_1(x_t-\rho x_{t-1})+e_t, t \geq 2 . \\<br>\tilde{y}_t &amp; &#x3D;(1-\rho) \beta_0+\beta_1 \tilde{x}_t+e_t, t \geq 2\end{aligned}$$<br>We can use FGLS to estimate:</li>
</ul>
<ol>
<li>Estimate the model using OLS and obtain the OLS residuals $\hat{u}_t$</li>
<li>Use OLS to estimate $\hat{u_t} \sim \hat{u_{t-1}}$ and obtain $\hat{\rho}$.</li>
<li>Calculate $\tilde{y_t}&#x3D;y_t-\hat{\rho} y_{t-1}$ and $\tilde{x_t}&#x3D;x_t-\hat{\rho} x_{t-1}$, then use OLS to regress $\tilde{y_t}$ on $\tilde{x_t}$.</li>
</ol>
<h5 id="Serial-Correlation-Robust-Inference-after-OLS"><a href="#Serial-Correlation-Robust-Inference-after-OLS" class="headerlink" title="Serial Correlation-Robust Inference after OLS"></a>Serial Correlation-Robust Inference after OLS</h5><ul>
<li>了解即可，记住HAC（heteroskedasticity and auto-correlation consistent）</li>
<li>We can show that$$AVar(\hat{\beta_1})&#x3D;(\sum_{t&#x3D;1}^T E(r_t^2))^{-2} Var(\sum_{t&#x3D;1}^T r_t u_t)$$where $r_t$ is the error term in $x_{t 1}&#x3D;\delta_0+\delta_2 x_{t 2}+\ldots+\delta_k x_{t k}+r_t$. We want to find and estimator for $A \operatorname{Var}(\hat{\beta}_1)$.</li>
<li>Let $\hat{r}_t$ denote the residuals from regressing $x_1$ on all other independent variables, and $\hat{u}_t$ as the OLS residual from regressing $y$ on all $x$.</li>
<li>Define$$\hat{\nu}&#x3D;\sum_{t&#x3D;1}^T \hat{a_t}^2+2 \sum_{h&#x3D;1}^g[1-h &#x2F;(g+1)](\sum_{t&#x3D;h+1}^T \hat{a_t} \hat{a_{t-h}}),$$where $\hat{a_t}&#x3D;\hat{r_t} \hat{u_t}$.</li>
<li>Then$$s e(\hat{\beta_1})&#x3D;[se_c(\hat{\beta_1}) &#x2F; \hat{\sigma}]^2 \sqrt{\hat{\nu}}$$where $se_c(\hat{\beta_1})$ is the conventional standard error of $\hat{\beta}_1$, and $\hat{\sigma}$ is the square root of the sum of the OLS residual squared.</li>
<li>We use $g$ to capture how much serial correlation we are allowing in computing the standard error.</li>
<li>For annual data, choose $g&#x3D;1$ or $g&#x3D;2$</li>
<li>Use a larger $g$ for larger sample size.</li>
<li>When $g&#x3D;1$,$$\hat{\nu}&#x3D;\sum_{t&#x3D;1}^T \hat{a_t}^2+\sum_{t&#x3D;2}^T(\hat{a_t} \hat{a_{t-1}})$$</li>
<li>This formula is robust to arbitrary serial correlation and arbitrary heteroskedasticity. So people sometimes call this heteroskedasticity and auto-correlation consistent, or HAC, standard errors.</li>
</ul>
<h3 id="Spatial-Correlation"><a href="#Spatial-Correlation" class="headerlink" title="Spatial Correlation"></a>Spatial Correlation</h3><h4 id="Data-with-group-structure"><a href="#Data-with-group-structure" class="headerlink" title="Data with group structure"></a>Data with group structure</h4><ul>
<li>group structure, 例如不同班级的学生，在同班之内是有相关性的</li>
<li>Example: class size and test score$$y_{i g}&#x3D;\beta_0+\beta_1 x_g+u_{i g}$$</li>
<li>Use $i$ to denote student, who are randomly assign to different class $g . y_{i g}$ is the test score of student $i$ （who is in class $g$ ）, $x_g$ is the class size （which has the same value for students in the same class.）</li>
<li>Assume that $E(u \mid X)&#x3D;0$</li>
</ul>
<ul>
<li>However, observations within the same $g$ is not independent （students in the same class are exposed to the same teacher and classroom…）$$E(u_{i g} u_{j g})&#x3D;\rho_u \sigma_u^2 \neq 0$$</li>
</ul>
<ul>
<li>We call $\rho_u$ intraclass correlation coefficient.、</li>
<li>这种相关性就叫 spatial correlation</li>
<li>存在这种情况时，一致性和无偏性还是保证的，但方差和标准差有变化。</li>
</ul>
<h4 id="Fix-spatial-correlation"><a href="#Fix-spatial-correlation" class="headerlink" title="Fix spatial correlation"></a>Fix spatial correlation</h4><h5 id="OLS-and-Cluster-Standard-Errors"><a href="#OLS-and-Cluster-Standard-Errors" class="headerlink" title="OLS and Cluster Standard Errors"></a>OLS and Cluster Standard Errors</h5><ul>
<li>The general idea is to model correlation of error terms within a group, and assume no correlation across groups. </li>
<li>group数量变多的时候是consistent的</li>
<li>当数量大于42的时候就可以认为group数量够多了</li>
</ul>
<h5 id="Use-group-mean"><a href="#Use-group-mean" class="headerlink" title="Use group mean"></a>Use group mean</h5><ul>
<li>Estimate$$\bar{y}_g&#x3D;\beta_0+\beta_1 x_g+\bar{u}_g$$by WLS using the group size as weights.</li>
<li>We can generalize the method to models with microcovariates$$y_{i g}&#x3D;\beta_0+\beta_1 x_g+\beta_2 w_{i g}+u_{i g}$$<ol>
<li>Estimate$$y_{i g}&#x3D;\mu_g+\beta_2 w_{i g}+\eta_{i g}$$The group effects, $\mu_g$, are coefficients on a full set of group dummies.</li>
<li>Regress the estimated group effects on group-level variables$$\hat{\mu}_g&#x3D;\beta_0+\beta_1 x_g+e_g$$In this step, we could either weight by the group size, or use no weights.</li>
</ol>
</li>
</ul>
<h2 id="Ch9-Proxy-Variable-and-Measurement-Error"><a href="#Ch9-Proxy-Variable-and-Measurement-Error" class="headerlink" title="Ch9 Proxy Variable and Measurement Error"></a>Ch9 Proxy Variable and Measurement Error</h2><h3 id="Endogeneity-and-Exogeneity"><a href="#Endogeneity-and-Exogeneity" class="headerlink" title="Endogeneity and Exogeneity"></a>Endogeneity and Exogeneity</h3><ul>
<li>Zero conditional mean condition:$$E(u \mid x)&#x3D;0$$<ul>
<li>$x_j$ is endogenous if it is correlated with $u$.</li>
<li>$x_j$ is exogenous if it is not correlated with $u$.</li>
<li>Violating the zero conditional mean condition will cause the OLS estimator to be biased and inconsistent.</li>
</ul>
</li>
</ul>
<h3 id="Proxy-Variable"><a href="#Proxy-Variable" class="headerlink" title="Proxy Variable"></a>Proxy Variable</h3><ul>
<li>代理变量</li>
</ul>
<h4 id="Omitted-Variable-Bias"><a href="#Omitted-Variable-Bias" class="headerlink" title="Omitted Variable Bias"></a>Omitted Variable Bias</h4><ul>
<li>$$\log (\text { wage })&#x3D;\beta_0+\beta_1 e d u c+\beta_2 a b i l+u$$</li>
<li>In this model, assume that $E(u \mid e d u c,abil)&#x3D;0$</li>
<li>假设首要目的是估计 $\beta_1$ consistently,不关注 $\beta_2$.</li>
</ul>
<ul>
<li>但我们没有关于abil的数据, 所以只用 educ 回归 $\log ($ wage $)$ </li>
<li>There is an omitted variable bias if $\operatorname{cov}(abil,educ) \neq 0$ and $\beta_2 \neq 0$.</li>
</ul>
<ul>
<li>One solution: use proxy variable for the omitted variable</li>
</ul>
<ul>
<li>Proxy variable: related to the unobserved variable that we would like to control for in our analysis<ul>
<li>只需要这个变量proxy variable与abil相关，即correlated，不需要完全相同</li>
</ul>
</li>
</ul>
<h4 id="Proxy"><a href="#Proxy" class="headerlink" title="Proxy"></a>Proxy</h4><ul>
<li><p>Formally, we have a model$$y&#x3D;\beta_0+\beta_1 x_1+\beta_2 x_2^*+u$$</p>
</li>
<li><p>Assume that $E\left(u \mid x_1, x_2^*\right)&#x3D;0$</p>
</li>
<li><p>$x_1$ is observed and $x_2^*$ is unobserved</p>
</li>
<li><p>We have a proxy variable for $x_2^*$, which is $x_2$$$x_2^*&#x3D;\delta_0+\delta_2 x_2+v_2$$</p>
</li>
<li><p>where $v_2$ is the error to allow the possibility that $x_2$ and $x_2^*$ is not exactly related. $E\left(v_2 \mid x_2\right)&#x3D;0$.</p>
</li>
<li><p>Replace the omitted variable by the proxy variable:$$\color{red}{y&#x3D;(\beta_0+\beta_2 \delta_0)+\beta_1 x_1+\beta_2 \delta_2 x_2+(u+\beta_2 v_2)}$$To get an unbiased and consistent estimator for $\beta_1$, we require$$E(u+\beta_2 v_2 \mid x_1, x_2)&#x3D;0$$</p>
</li>
<li><p>Break this down into two assumptions:</p>
<ol>
<li>$E\left(u \mid x_1, x_2\right)&#x3D;0$ : the proxy variable should be exogenous （intuitively, since $x_2^*$ is exogenous, the proxy variable is only good if it is also exogenous）<ul>
<li>代理变量需要时外生的</li>
</ul>
</li>
<li>$E\left(v_2 \mid x_1, x_2\right)&#x3D;0$ : this is equivalent as$$E(x_2^* \mid x_1, x_2)&#x3D;E(x_2^* \mid x_2)&#x3D;\delta_0+\delta_2 x_2$$Once $x_2$ is controlled for, the expected value of $x_2^*$ does not depend on $x_1$</li>
</ol>
</li>
<li><p>在上面的例子中，变成：$$\log (w a g e)&#x3D;\alpha_0+\alpha_1 e d u c+\alpha_2 I Q+e$$</p>
</li>
<li><p>In the wage equation example, the two assumptions are:</p>
<ol>
<li>$E(u \mid e d u c, I Q)&#x3D;0$</li>
<li>$E($ abil|educ, $I Q)&#x3D;E(a b i l \mid I Q)&#x3D;\delta_0+\delta_3 I Q$<ul>
<li>The average level of ability only changes with IQ, not with education （once IQ is fixed）.</li>
</ul>
</li>
</ol>
</li>
<li><p><strong>在这样的变化中，$\beta_1$ 是无偏的</strong></p>
<ul>
<li>违反假设，会造成误差</li>
</ul>
</li>
</ul>
<h4 id="Using-Lagged-Dependent-Variables-as-Proxy-Variables"><a href="#Using-Lagged-Dependent-Variables-as-Proxy-Variables" class="headerlink" title="Using Lagged Dependent Variables as Proxy Variables"></a>Using Lagged Dependent Variables as Proxy Variables</h4><ul>
<li>滞后因变量</li>
<li>$$\text { crime }&#x3D;\beta_0+\beta_1 \text { unem }+\beta_2 \text { expend }+\beta_3 \text { crime }_{-1}+u$$</li>
<li>By including crime $_{-1}$ in the equation, $\beta_2$ captures the effect of expenditure of law enforcement on crime, for cities with the same previous crime rate and current unemployment rate.</li>
</ul>
<h3 id="Measurement-Error"><a href="#Measurement-Error" class="headerlink" title="Measurement Error"></a>Measurement Error</h3><h4 id="Measurement-Error-in-the-Dependent-Variable"><a href="#Measurement-Error-in-the-Dependent-Variable" class="headerlink" title="Measurement Error in the Dependent Variable"></a>Measurement Error in the Dependent Variable</h4><ul>
<li>因变量的测量误差</li>
<li>Let $y^*$ denote the variable that we would like to explain.$$y^*&#x3D;\beta_0+\beta_1 x_1+\ldots+\beta_k x_k+u,$$and we assume it satisfies the Gauss-Markov assumptions.</li>
<li>Let $y$ to denote the observed measure of $y^*$</li>
<li>Measurement error is defined as$$e_0&#x3D;y-y^*$$</li>
<li>Plug in and rearrange$$y&#x3D;\beta_0+\beta_1 x_1+\ldots+\beta_k x_k+u+e_0$$</li>
<li>当e和自变量都无关的时候，结果仍然是一致且无偏的，但方差会变大</li>
<li>仍然适用OLS</li>
</ul>
<h4 id="Measurement-Error-in-the-Independent-Variable"><a href="#Measurement-Error-in-the-Independent-Variable" class="headerlink" title="Measurement Error in the Independent Variable"></a>Measurement Error in the Independent Variable</h4><ul>
<li>自变量的测量误差</li>
<li>Consider a simple regression model:$$y&#x3D;\beta_0+\beta_1 x_1^*+u$$We assume it satisfies the Gauss-Markov assumptions.</li>
</ul>
<ul>
<li>We do not observe $x_1^*$. Instead, we have a measure of $x_1^*$; call it $x_1$</li>
<li>The measurement error$$e_1&#x3D;x_1-x_1^*$$Assume $E\left(e_1\right)&#x3D;0$.</li>
</ul>
<ul>
<li>Plug in $x_1^*&#x3D;x_1-e_1$$$y&#x3D;\beta_0+\beta_1 x_1+(u-\beta_1 e_1)$$</li>
<li>To derive the properties of the OLS estimators, we need assumptions.</li>
<li>First, assume that:$$E(u \mid x_1^*, x_1)&#x3D;0$$This implies $E(y \mid x_1^*, x_1)&#x3D;E(y \mid x_1^*): x_1$ does not affect $y$ after $x_1^*$ has been controlled for.</li>
</ul>
<ul>
<li>Next, we consider two (mutually exclusive) cases about how the measurement error is correlated with $x$</li>
</ul>
<ol>
<li>$\operatorname{Cov}(x_1, e_1)&#x3D;0$</li>
<li>$\operatorname{Cov}(x_1^*, e_1)&#x3D;0$</li>
</ol>
<h5 id="Case-1：-operatorname-Cov-x-1-e-1-x3D-0"><a href="#Case-1：-operatorname-Cov-x-1-e-1-x3D-0" class="headerlink" title="Case 1：$\operatorname{Cov}(x_1, e_1)&#x3D;0$"></a>Case 1：$\operatorname{Cov}(x_1, e_1)&#x3D;0$</h5><ul>
<li>Plug in $x_1^*&#x3D;x_1-e_1$$$y&#x3D;\beta_0+\beta_1 x_1+(u-\beta_1 e_1)$$</li>
<li>Then $E\left(u-\beta_1 e_1 \mid x_1\right)&#x3D;0$, so the OLS estimator of the slope coefficient of $x_1$ in the above model gives us unbiased and consistent estimator of $\beta_1$.</li>
<li>If $u$ is uncorrelated with $e_1$, then $\operatorname{Var}\left(u-\beta_1 e_1\right)&#x3D;\sigma_u^2+\beta_1^2 \sigma_{e_1}^2$.</li>
<li>一致性和无偏性仍然成立</li>
</ul>
<h5 id="Case-2：-operatorname-Cov-x-1-e-1-x3D-0"><a href="#Case-2：-operatorname-Cov-x-1-e-1-x3D-0" class="headerlink" title="Case 2：$\operatorname{Cov}(x_1^*, e_1)&#x3D;0$"></a>Case 2：$\operatorname{Cov}(x_1^*, e_1)&#x3D;0$</h5><ul>
<li>The classical <strong>errors-in-variables （CEV）</strong> assumption is that $e_1$ is uncorrealted with the unobserved variables.</li>
<li>Idea: the two components of $x_1$ is uncorrelated$$x_1&#x3D;x_1^*+e_1$$</li>
<li>Plug in $x_1^*&#x3D;x_1-e_1$$$y&#x3D;\beta_0+\beta_1 x_1+(u-\beta_1 e_1)$$</li>
<li>Then$$\operatorname{Cov}(u-\beta_1 e_1, x_1)&#x3D;-\beta_1 \operatorname{Cov}(x_1, e_1)&#x3D;-\beta_1 \sigma_{e_1}^2 \neq 0$$</li>
<li>此时一致性和无偏性都破坏了</li>
<li>The probability limit of $\hat{\beta}_1$<ul>
<li>$$\operatorname{plim}(\hat{\beta_1}) &#x3D;\beta_1+\frac{\operatorname{Cov}(x_1, u-\beta_1 e_1)}{\operatorname{Var}(x_1)}&#x3D;\beta_1-\frac{\beta_1 \sigma_{e_1}^2}{\sigma_{x_1}^{2 *}+\sigma_{e_1}^2}&#x3D;\beta_1(\frac{\sigma_{x_1}^{2 *}}{\sigma_{x_1}^{2 *}+\sigma_{e_1}^2}) $$</li>
<li>$\operatorname{plim}(\hat{\beta}_1)$ is closer to zero than $\beta_1$.</li>
</ul>
</li>
<li>This is called the attenuation bias in OLS due to CEV</li>
<li>If the variance of $x_1^*$ is large relative to the variance in the measurement error, then the inconsistency in OLS will be small.</li>
</ul>
<h5 id="Case-3：-operatorname-Cov-x-1-e-1-x3D-0-text-and-operatorname-Cov-x-1-e-1-x3D-0"><a href="#Case-3：-operatorname-Cov-x-1-e-1-x3D-0-text-and-operatorname-Cov-x-1-e-1-x3D-0" class="headerlink" title="Case 3：$\operatorname{Cov}(x_1, e_1)&#x3D;0 \text{ and } \operatorname{Cov}(x_1^*, e_1)&#x3D;0$"></a>Case 3：$\operatorname{Cov}(x_1, e_1)&#x3D;0 \text{ and } \operatorname{Cov}(x_1^*, e_1)&#x3D;0$</h5><ul>
<li>这种情况下，OLS几乎一定会造成无偏性和一致性失效。</li>
</ul>
<h2 id="Ch15-Instrumental-Variable"><a href="#Ch15-Instrumental-Variable" class="headerlink" title="Ch15 Instrumental Variable"></a>Ch15 Instrumental Variable</h2><h3 id="IV-Estimator"><a href="#IV-Estimator" class="headerlink" title="IV Estimator"></a>IV Estimator</h3><h4 id="Omitted-Variable-bias"><a href="#Omitted-Variable-bias" class="headerlink" title="Omitted Variable bias"></a>Omitted Variable bias</h4><ul>
<li>$$\log (\text { wage })&#x3D;\beta_0+\beta_1 e d u c+\beta_2 a b i l+e$$</li>
<li>In this model, assume that $E(e \mid e d u c, a b i l)&#x3D;0$</li>
<li>只想一致地估计 $\beta_1$ 不在意 $\beta_2$.</li>
</ul>
<ul>
<li>假设没有abli的数据，只进行下面回归$$y&#x3D;\beta_0+\beta e d u c+u$$where $u&#x3D;\gamma a b i l+e$.</li>
<li>Note that $E(u \mid e d u c)&#x3D;E\left(\beta_2 a b i l+e \mid e d u c\right)&#x3D;\beta_2 E(a b i l \mid e d u c)$. If $E(a b i l)$ changes when educ changes, then the zero conditional mean assumption is not satisfied.</li>
</ul>
<ul>
<li>$$\begin{aligned}<br>\hat{\beta_{OLS}} &amp; &#x3D;\frac{\sum_{i&#x3D;1}^N(y_i-\bar{y})(x_i-\bar{x})}{\sum_{i&#x3D;1}^N(x_i-\bar{x})^2} &#x3D;\beta+\frac{\sum_{i&#x3D;1}^N(x_i-\bar{x}) u_i}{\sum_{i&#x3D;1}^N(x_i-\bar{x})^2} \\<br>\hat{\beta_{OLS}} &amp; \stackrel{plim}{\longrightarrow} \beta+\frac{\operatorname{cov}(x, u)}{\operatorname{var}(x)} .<br>\end{aligned}$$</li>
<li>Since $E(u \mid x) \neq 0, E\left(\hat{\beta}_{O L S}\right) \neq \beta$, OLS is not unbiased</li>
<li>Since $\operatorname{cov}(x, u) \neq 0$, OLS is not consistent.</li>
<li><strong>此时无偏性和一致性都不满足</strong></li>
</ul>
<h4 id="Instrumental-Variable-（IV）"><a href="#Instrumental-Variable-（IV）" class="headerlink" title="Instrumental Variable （IV）"></a>Instrumental Variable （IV）</h4><ul>
<li>用z来替换x</li>
<li>$$y&#x3D;\beta_0+\beta_1 x+u$$</li>
<li>仍然可以保证 $E(u)&#x3D;0$,因为可以调整截距项</li>
</ul>
<ul>
<li>With $E(u \mid x) \neq 0$, we no longer have $E(x u)&#x3D;0$. </li>
<li>Estimation idea: find another variable $z$, where$$\operatorname{Cov}(x, z) \neq 0 ; \quad \operatorname{Cov}(z, u)&#x3D;0$$<ul>
<li>$\operatorname{Cov}(z, u)$ implies$\operatorname{Cov}(z, u)&#x3D;E(u z)-E(z) E(u)&#x3D;E(u z)&#x3D;0$</li>
</ul>
</li>
</ul>
<ul>
<li><p>Use $E(u z)&#x3D;0$ and $E(u)&#x3D;0$ to find the sample analogue, $$E(u z)&#x3D;0 \quad \frac{1}{N} \sum_{i&#x3D;1}^N z_i \hat{u_i}&#x3D;0 $$$$E(u)&#x3D;0 \quad \frac{1}{N} \sum_{i&#x3D;1}^N \hat{u_i}&#x3D;0$$and solve the equations.</p>
</li>
<li><p>$$\begin{aligned}<br>\hat{\beta_1}^{I V} &amp; &#x3D;\frac{\sum_{i&#x3D;1}^N\left(y_i-\bar{y}\right)\left(z_i-\bar{z}\right)}{\sum_{i&#x3D;1}^N\left(x_i-\bar{x}\right)\left(z_i-\bar{z}\right)} \\<br>\hat{\beta_0}^{I V} &amp; &#x3D;\bar{y}-\hat{\beta_1}^{I V} \bar{x}<br>\end{aligned}$$</p>
</li>
<li><p>把这个叫做 IV estimator</p>
</li>
<li><p>OLS求的值是一种特殊的IV estimator，当z&#x3D;x时。</p>
</li>
</ul>
<h4 id="Assumptions-on-IV"><a href="#Assumptions-on-IV" class="headerlink" title="Assumptions on IV"></a>Assumptions on IV</h4><ul>
<li>Instrument relevance: <ul>
<li>相关性</li>
<li>$\operatorname{Cov}(x, z) \neq 0: z$ is relevant for explaining variation in $x$. </li>
<li>$x&#x3D;\pi_0+\pi_1 z+v$, 进行零检验 $H_0: \pi_1&#x3D;0$.</li>
</ul>
</li>
<li>Instrument exogeneity: <ul>
<li>外生性</li>
<li>$\operatorname{Cov}(u, z)&#x3D;0$ : 保证了一致性. </li>
<li>不能直接从数据中检验，需要根据金融理论。</li>
</ul>
</li>
</ul>
<h3 id="Properties-and-Inference-with-the-IV-Estimator"><a href="#Properties-and-Inference-with-the-IV-Estimator" class="headerlink" title="Properties and Inference with the IV Estimator"></a>Properties and Inference with the IV Estimator</h3><ul>
<li>一致性满足</li>
<li>无偏性不满足<ul>
<li>consider the expectation of $\hat{\beta_1}^{IV}$ conditional on $z$$$E(\hat{\beta_1}^{I V})&#x3D;\beta+E(\frac{\sum_{i&#x3D;1}^N(z_i-\bar{z}) u_i}{\sum_{i&#x3D;1}^N(x_i-\bar{x})(z_i-\bar{z})})&#x3D;\beta+E(E[\frac{\sum_{i&#x3D;1}^n(z_i-\bar{z}) u_i}{\sum_{i&#x3D;1}^N(x_i-\bar{x})(z_i-\bar{z})} \mid z])$$</li>
<li>由于x不是常数，因此不能进一步化简</li>
</ul>
</li>
<li>方差：<ul>
<li>增加假设$$E[u^2 \mid z]&#x3D;\sigma^2$$</li>
<li>在如上假设情况下：$$AVar(\hat{\beta_1}^{IV})&#x3D;\frac{\sigma^2}{N \sigma_x^2 \rho_{x, z}^2}$$</li>
<li>其中 $\sigma_x^2$ 是总体x的方差，$\sigma^2$ 是总体u的方差， $\rho_{x,z}^2$ 是总体x和z的相关性</li>
<li>The asymptotic variance of $\hat{\beta}_1^{I V}$ is </li>
<li>$$\widehat{AVar}(\hat{\beta_1}^{IV})&#x3D;\frac{\hat{\sigma}^2}{SST_xR_{x,z}^2}$$<ul>
<li>where $S S T_x&#x3D;\sum_{i&#x3D;1}^n(x_i-\bar{x})^2$, and $R_{x, z}^2$ is the R-squared of $x_i$ on $z_i$.</li>
</ul>
</li>
</ul>
<ul>
<li>Note that the variance of the OLS estimator is </li>
<li>$$\widehat{\operatorname{Var}}(\hat{\beta}_1^{O L S})&#x3D;\frac{\hat{\sigma}^2}{S S T_x}$$</li>
<li><strong>So the IV estimator has a larger variance.</strong></li>
</ul>
<ul>
<li>If $x$ an $z$ are only slightly correlated, then $R_{x, z}^2$ can be small, and this translate into a large sampling variance of the IV estimator.</li>
</ul>
</li>
</ul>
<h3 id="Two-Stage-Least-Squares"><a href="#Two-Stage-Least-Squares" class="headerlink" title="Two Stage Least Squares"></a>Two Stage Least Squares</h3><h4 id="Multiple-Instrumental-Variables"><a href="#Multiple-Instrumental-Variables" class="headerlink" title="Multiple Instrumental Variables"></a>Multiple Instrumental Variables</h4><ul>
<li>有可能不只一个IV</li>
<li>考虑模型$$y&#x3D;\beta_0+\beta_1 x_1+\beta_2 x_2+u$$</li>
<li>Assume $x_1$ is endogenous and has two IVs: $z_1$ and $z_2$. Assume $x_2$ is exogenous.</li>
<li>Two-stage least squares （2SLS）: 使用两个IV的线性组合来构造新的IV</li>
</ul>
<h4 id="2SLS"><a href="#2SLS" class="headerlink" title="2SLS"></a>2SLS</h4><ul>
<li><p>接着上面的例子</p>
</li>
<li><p>The steps of 2SLS</p>
<ol>
<li>Stage 1: estimate （using OLS）$$x_1&#x3D;\alpha_0+\alpha_1 z_1+\alpha_2 z_2+\alpha_3 x_2+v$$and calculate $\hat{x}_1$.<ul>
<li>这个阶段的回归需要包含所有的外生变量</li>
</ul>
</li>
<li>Stage 2: use $\hat{x}_1$ as an IV for $x_1$. Or directly estimate$$y&#x3D;\beta_0+\beta_1 \hat{x}_1+\beta_2 x_2+u$$</li>
</ol>
</li>
<li><p>多个内生变量时：</p>
<ul>
<li><p>考虑有两个内生变量的模型:$$y&#x3D;\beta_0+\beta_1 x_1+\beta_2 x_2+\beta_3 x_3+u$$where $x_1$ and $x_2$ are endogenous （whose IV are $z_1$ and $z_2$）, $x_3$ is exogenous.</p>
</li>
<li><p>In the first stage, we need to include all instruments and exogenous variables on the right hand side</p>
</li>
<li><p>$$x_1&#x3D;\alpha_0+\alpha_1 z_1+\alpha_2 z_2+\alpha_3 x_3+v$$$$x_2&#x3D;\gamma_0+\gamma_1 z_1+\gamma_2 z_2+\gamma_3 x_3+v$$</p>
</li>
</ul>
</li>
<li><p><strong>IV的数量应该大于等于内生变量的数量</strong></p>
</li>
</ul>
<h3 id="Issues-with-IV"><a href="#Issues-with-IV" class="headerlink" title="Issues with IV"></a>Issues with IV</h3><h4 id="Sample-size"><a href="#Sample-size" class="headerlink" title="Sample size"></a>Sample size</h4><ul>
<li>需要一个大样本，因为在2SLS的第一步中，$x&#x3D;\alpha_0+\alpha_1z+e$</li>
<li>其中的$\alpha_0+α_1z$ 是与u无关的，e是与u相关的</li>
<li>在2SLS第二步中，我们希望用$\alpha_0+\alpha_1 z$ 来表示x,但实际上是用 $\hat{\alpha}_0+\hat{\alpha}_1 z$. 后项可能包含关于u的信息。</li>
<li>因此需要大样本。</li>
</ul>
<h4 id="Weak-instruments"><a href="#Weak-instruments" class="headerlink" title="Weak instruments"></a>Weak instruments</h4><ul>
<li>Weak instruments: low correlation between $x$ and $z$</li>
<li>Suppose there is some small correlated between $u$ and $z$$$\begin{aligned}\operatorname{plim}(\hat{\beta}_1^{I V}) &amp; &#x3D;\beta_1+\frac{\operatorname{Cov}(z, u)}{\operatorname{Cov}(z, x)} \\ &amp; &#x3D;\beta_1+\frac{\operatorname{Corr}(z, u)}{\operatorname{Corr}(z, x)} \cdot \frac{\sigma_u}{\sigma_x},\end{aligned}$$where $\sigma_u$ and $\sigma_x$ are the standard deviations of $u$ and $x$ in the population respectively.</li>
<li>We can show that$$\operatorname{plim}(\hat{\beta}_1^{O L S})&#x3D;\beta_1+\operatorname{Corr}(x, u) \cdot \frac{\sigma_u}{\sigma_x}$$</li>
<li>If $\operatorname{Corr}(z, x)$ is small enough, then even if $\operatorname{Corr}(z, u)$ is small, the IV estimator could result in larger asymptotic bias than the OLS estimator.</li>
<li>对于无偏性在小样本下也有影响。</li>
</ul>
<h5 id="检验弱相关"><a href="#检验弱相关" class="headerlink" title="检验弱相关"></a>检验弱相关</h5><ul>
<li>$$y&#x3D;\beta_0+\beta_1 x_1+\beta_2 x_2+u$$</li>
<li>Assume $x_1$ is endogenous with two instrumental variables $z_1$ and $z_2$, and $x_2$ is exogenous.</li>
<li>Estimate$$x_1&#x3D;\alpha_0+\alpha_1 z_1+\alpha_2 z_2+\alpha_3 x_2+e$$</li>
<li>Test $H_0: \alpha_1&#x3D;\alpha_2&#x3D;0$</li>
<li>当F-stat大于10的时候可以说没有弱相关性</li>
</ul>
<h4 id="Testing-for-endogeneity"><a href="#Testing-for-endogeneity" class="headerlink" title="Testing for endogeneity"></a>Testing for endogeneity</h4><ul>
<li>检验x与u是否相关</li>
<li>Suppose $x_1$ is endogenous, and the IV is $z$$$y&#x3D;\beta_0+\beta_1 x_1+\beta_2 x_2+u$$</li>
<li>First stage: $x_1&#x3D;\alpha_0+\alpha_1 z+\alpha_2 x_2+v$. If $x_1$ is correlated with $u$, then it must be $v$ is correlated with $u$. Estimate the equation to get $\hat{v}$.</li>
</ul>
<ul>
<li>Estimate $y&#x3D;\delta_0+\delta_1 x_1+\delta_2 x_2+\delta_3 \hat{v}+e$. Test $H_0: \delta_3&#x3D;0$.</li>
</ul>
<h4 id="Testing-overidentifying-restrictions"><a href="#Testing-overidentifying-restrictions" class="headerlink" title="Testing overidentifying restrictions"></a>Testing overidentifying restrictions</h4><ul>
<li><p>当z比x多的时候，可以比较好地推断 $Cov(z,u)&#x3D;0$</p>
</li>
<li><p>Suppose $x_1$ is endogenous, and the IVs are $z_1$ and $z_2$.</p>
</li>
<li><p>Use either one of them, we calculate $\hat{\beta}_1^{I V 1}$ and $\hat{\beta}_1^{I V 2}$</p>
</li>
<li><p>If $\hat{\beta}_1^{I V 1}$ is very different from $\hat{\beta}_1^{I V 2}$, then at least one of them does not satisfy $\operatorname{Cov}(z, u)&#x3D;0$.</p>
</li>
<li><p>If they are close to each other, then it could be both satisfies $\operatorname{Cov}(z, u)&#x3D;0$, or neither.</p>
</li>
<li><p>当z很多的时候</p>
<ul>
<li>Testing overidentifying restrictions:<ol>
<li>使用2SLS估计，并得到2SLS残项 $\hat{u}_1$.</li>
<li>Regress $\hat{u}_1$ on all exogenous variables. Obtain the $R$-squared, say $R^2$.</li>
<li>若所有IV都与 $u_1$ 无关，则 $N \cdot R^2 \sim \chi_q^2$, where $q$ is the number of instrumental variables from outside the model minus the total number of endogenous explanatory variables. </li>
<li>Reject $H_0$ if $N \cdot R^2$ exceeds the critical value.</li>
</ol>
</li>
</ul>
</li>
</ul>
<h2 id="Ch17-Limited-Dependent-Variable-Models"><a href="#Ch17-Limited-Dependent-Variable-Models" class="headerlink" title="Ch17 Limited Dependent Variable Models"></a>Ch17 Limited Dependent Variable Models</h2><h3 id="Linear-Probability-model"><a href="#Linear-Probability-model" class="headerlink" title="Linear Probability model"></a>Linear Probability model</h3><h4 id="Limited-Dependent-Variable"><a href="#Limited-Dependent-Variable" class="headerlink" title="Limited Dependent Variable"></a>Limited Dependent Variable</h4><ul>
<li>因变量只能取特定值</li>
<li>In the population, $y$ takes on two values: 0 and 1 . We are interested in how $x$ will affect $y$.</li>
<li>Suppose $x$ and $y$ has this linear relation:$$y&#x3D;\beta_0+\beta_1 x+u$$</li>
<li>Suppose $E(u \mid x)&#x3D;0$. Then$$E(y \mid x)&#x3D;P(y&#x3D;1 \mid x)&#x3D;\beta_0+\beta_1 x$$$\beta_1$ represents when $x$ increases by one unit, the impact on the probability that $y&#x3D;1$. In other words, $\beta_1.$ measures the marginal effect of $x$ on the probability that $y&#x3D;1$</li>
<li>y是否是二元变量都不影响对这个模型的解释<ul>
<li>Descriptive： $\beta_1$ is the expected difference in the probability that $y&#x3D;1$ if $x$ changes by one unit.</li>
<li>Causal: one unit increase in $x$ causes the probability of $y&#x3D;1$ to change by $\beta_1$ on average.</li>
</ul>
</li>
<li>这个模型违反了同方差性，因为方差是x的函数，可以用FGLS来估算。</li>
</ul>
<h3 id="Non-linear-Model-and-Maximum-Likelihood"><a href="#Non-linear-Model-and-Maximum-Likelihood" class="headerlink" title="Non-linear Model and Maximum Likelihood"></a>Non-linear Model and Maximum Likelihood</h3><ul>
<li>Consider the following non-linear model:$$E(y \mid x)&#x3D;P(y&#x3D;1 \mid x)&#x3D;G(\beta_0+\beta_1 x)$$where $G$ is a function mapping values to the range of 0 and 1 , to make sure $E(y \mid x)$ belongs to 0 and 1 .</li>
<li>$G$ can have different functional forms. We consider two common ones:<ul>
<li>logistic function （logit）<ul>
<li>$$G(z)&#x3D;\frac{\exp (z)}{1+\exp (z)}$$</li>
</ul>
</li>
<li>standard normal CDF （probit）<ul>
<li>$$G(z)&#x3D;\Phi(z)$$</li>
</ul>
</li>
<li><img src="https://cdn.jsdelivr.net/gh/ldvyyc/ImgBed/20230409160715.png" alt="image.png"></li>
</ul>
</li>
</ul>
<h4 id="Properties-of-Logit-and-Probit"><a href="#Properties-of-Logit-and-Probit" class="headerlink" title="Properties of Logit and Probit"></a>Properties of Logit and Probit</h4><ul>
<li>y的这两种分布取决于残项e的分布</li>
<li>Suppose random variable $e$ has a CDF:$$\operatorname{Pr}(e \leq z)&#x3D;G(z)$$Here $G(z)$ can be either logit or probit.</li>
<li>Let $y^*&#x3D;\beta_0+\beta_1 x+e$, where $e$ is independent of $x$.</li>
<li>$$\begin{aligned} P(y&#x3D;1 \mid x) &amp; &#x3D;P(y^*&gt;0 \mid x) &#x3D;P(\beta_0+\beta_1 x+e&gt;0 \mid x) \\ &amp; &#x3D;P(e&gt;-\beta_0-\beta_1 x) &#x3D;1-\operatorname{Pr}(e \leq-\beta_0-\beta_1 x) \\ &amp; &#x3D;1-G\left(-\beta_0-\beta_1 x\right)&#x3D;G\left(\beta_0+\beta_1 x\right) .\end{aligned}$$</li>
</ul>
<h4 id="Partial-effect-of-x-on-y"><a href="#Partial-effect-of-x-on-y" class="headerlink" title="Partial effect of x on y"></a>Partial effect of x on y</h4><ul>
<li>the marginal effect of $x$ on the probability that $y&#x3D;1$$$\frac{\partial p(x)}{\partial x_1}&#x3D;g(\beta_0+\beta_1 x) \beta_1$$where $p(x)&#x3D;P(y&#x3D;1 \mid x), g(z) \equiv \frac{d G}{d z}(z)$.<ul>
<li>即对上面的式子求导</li>
</ul>
</li>
<li>When we have more than one independent variables:$$\frac{\partial p(x)}{\partial x_j}&#x3D;g(\beta_0+\boldsymbol{x} \boldsymbol{\beta}) \beta_j$$where $\boldsymbol{x} \boldsymbol{\beta}&#x3D;\beta_1 x_1+\ldots+\beta_k x_k$.</li>
</ul>
<ul>
<li>So the ratio of the partial effect of $x_j$ and $x_k$ is $\frac{\beta_j}{\beta_k}$.</li>
<li>这种方法和OLS比的弱点在于这个偏导数的前项g取决于x</li>
<li>解决办法：<ol>
<li>找特殊点，例如均值点。<ul>
<li>Partial effect at the average:$$g(\hat{\beta_0}+\overline{\boldsymbol{x}}\hat{\beta_{\mathbf{1}}})&#x3D;g(\hat{\beta_0}+\hat{\beta_1} \bar{x_1}+\hat{\beta_2} \bar{x_2}+\cdot+\hat{\beta_k} \bar{x_k})$$</li>
</ul>
</li>
<li>求偏导的均值<ul>
<li>Average marginal effect:$$[N^{-1} \sum_{i&#x3D;1}^N g(\hat{\beta_0}+x_{i} \hat{\beta_1})] \hat{\beta_j}$$</li>
</ul>
</li>
</ol>
</li>
</ul>
<h4 id="Maximum-Likelihood-Estimation"><a href="#Maximum-Likelihood-Estimation" class="headerlink" title="Maximum Likelihood Estimation"></a>Maximum Likelihood Estimation</h4><ul>
<li><p>估计：在样本中观察到某些值时y&#x3D;1，另外一些值时y&#x3D;0</p>
</li>
<li><p>使用最大似然估计找到 $\beta$ 使得这种成立的概率最大。</p>
</li>
<li><p>下面就是一个普通的求最大似然估计的过程，当作概统复习：</p>
</li>
<li><p>Suppose we have a random sample of size $N$. Fix every $x$ and $\beta$, the probability that $y&#x3D;1$ is:$$E(y \mid x)&#x3D;P(y&#x3D;1 \mid x)&#x3D;G(\beta_0+\beta_1 x) \equiv G(\beta x) $$</p>
</li>
<li><p>Then for any observation $y&#x3D;0$ or $y&#x3D;1$, its probability density function is:$$f(y \mid \beta x)&#x3D;G(\beta x)^y[1-G(\beta x)]^{(1-y)}$$</p>
</li>
<li><p>For a random sample, all observations are independent of each other. Then the probability that we observe the sample is: （ $i$ is the index for each observation）$$f({y_1, \ldots, y_N} \mid \beta x_i)&#x3D;\prod_{i&#x3D;1}^N[G(\beta x_i)]^{y_i}[1-G(\beta x_i)]^{(1-y_i)}$$</p>
</li>
</ul>
<ul>
<li>Maximum likelihood estimation (MLE): maximize the probability that we observe the data:$$\max_{\boldsymbol{\beta}} f({y_1, \ldots, y_N} \mid \beta x_i)&#x3D;\max_{\boldsymbol{\beta}} \prod_{i&#x3D;1}^N[G(\beta x_i)]^{y_i}[1-G(\beta \boldsymbol{x}_{\boldsymbol{i}})]^{(1-y_i)}$$</li>
</ul>
<ul>
<li>Take the natural logarithm and define:$$\ell_i(\beta)&#x3D;\log ([G(\beta x_i)]^{y_i}[1-G(\beta x_i)]^{(1-y_i)})&#x3D;y_i \log [G( x_i)]+(1-y_i) \log [1-G(\beta x_i)]$$</li>
<li>Then we can equivalently write:$$\max_\beta \sum_{i&#x3D;1}^N \ell_i(\beta)&#x3D;\max_{\boldsymbol{\beta}} \sum_{y_i&#x3D;1} \log [G(\beta x_{\boldsymbol{i}})]+\sum_{y_i&#x3D;0} \log [1-G(\beta x_{\boldsymbol{i}})]$$</li>
<li><strong>MLE is consistent and asymptotically efficient.</strong></li>
</ul>
<h4 id="MLE-and-OLS"><a href="#MLE-and-OLS" class="headerlink" title="MLE and OLS"></a>MLE and OLS</h4><ul>
<li>OLS用来估算线性模型</li>
<li>MLE用来估计线性和非线性模型</li>
<li>当u服从正态分布时，MLE与OLS结果相同</li>
</ul>
<h2 id="Appendix"><a href="#Appendix" class="headerlink" title="Appendix"></a>Appendix</h2><ul>
<li><p>$\color{red}{\text{Law of Iterated Expectation:}}$</p>
<ul>
<li>$$\color{red}{E(y)&#x3D;E[E(y|x)]}$$</li>
</ul>
</li>
<li><p>Summation operation</p>
<ul>
<li>$$\sum_{i&#x3D;1}^N(x_i-\bar{x})(y_i-\bar{y})&#x3D;\sum_{i&#x3D;1}^N(x_i-\bar{x})y_i&#x3D;\sum_{i&#x3D;1}^N(x_iy_i-\bar{x}\bar{y})$$</li>
</ul>
</li>
<li><p>Variance</p>
<ul>
<li>$$\begin{aligned}<br>\operatorname{Var}(X+a) &amp; &#x3D;\operatorname{Var}(X) \\<br>\operatorname{Var}(a X) &amp; &#x3D;a^2 \operatorname{Var}(X) \\<br>\operatorname{Var}(X) &amp; &#x3D;\operatorname{Cov}(X, X) \\<br>\operatorname{Var}(a X+b Y) &amp; &#x3D;a^2 \operatorname{Var}(X)+b^2 \operatorname{Var}(Y)+2 a b \operatorname{Cov}(X, Y) \\<br>\operatorname{Var}\left(\sum_{i&#x3D;1}^N a_i X_i\right) &amp; &#x3D;\sum_{i, j&#x3D;1}^N a_i a_j \operatorname{Cov}(X_i, X_j) \\<br>&amp; &#x3D;\sum_{i&#x3D;1}^N a_i^2 \operatorname{Var}(X_i)+\sum_{i \neq j} a_i a_j \operatorname{Cov}(X_i, X_j) \\<br>&amp; &#x3D;\sum_{i&#x3D;1}^N a_i^2 \operatorname{Var}(X_i)+2 \sum_{i&#x3D;1}^N \sum_{j&#x3D;i+1}^N a_i a_j \operatorname{Cov}(X_i, X_j) .<br>\end{aligned}$$</li>
</ul>
</li>
</ul>

            </div>
            <hr />

            
            <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.88rem;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-large waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fa fa-close"></i></a>
            <h4 class="reward-title">随缘买咖啡～</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <div id="wechat">
                        <img src="/medias/reward/Wechat_yyc.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>
            

            <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">

<div id="article-share">
    
    <div class="social-share" data-disabled="qzone" data-wechat-qrcode-helper="<p>微信里点“发现”->“扫一扫”二维码便可查看分享。</p>"></div>
    
</div>

<script src="/libs/share/js/social-share.min.js"></script>

            

    <div class="reprint" id="reprint-statement">
        <p class="reprint-tip">
            <i class="fa fa-exclamation-triangle"></i>&nbsp;&nbsp;
            <span>转载规则</span>
        </p>
        
            <div class="center-align">
                <a rel="license noopener" target="_blank" href="https://creativecommons.org/licenses/by/4.0/deed.zh">
                    <img alt=""
                         style="border-width:0"
                         src="https://i.creativecommons.org/l/by/4.0/88x31.png"/>
                </a>
            </div>
            <br/>
            <span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text"
                  property="dct:title" rel="dct:type">
                    《计量经济学笔记》
                </span> 由
            <a xmlns:cc="http://creativecommons.org/ns#" href="/2023/04/10/ji-liang-jing-ji-xue-bi-ji/" property="cc:attributionName"
               rel="cc:attributionURL">
                Frank Yu
            </a> 采用
            <a rel="license noopener" target="_blank" href="https://creativecommons.org/licenses/by/4.0/deed.zh">
                知识共享署名 4.0 国际许可协议
            </a>进行许可。
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>


        </div>
    </div>

    

    

    

    
    <div class="livere-card card" data-aos="fade-up">
    <!-- 来必力City版安装代码 -->
    <div id="lv-container" class="card-content" data-id="city" data-uid="MTAyMC81ODE5NC8zNDY1Nw">
        <script type="text/javascript">
            (function (d, s) {
                let j, e = d.getElementsByTagName(s)[0];
                if (typeof LivereTower === 'function') {
                    return;
                }

                j = d.createElement(s);
                j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
                j.async = true;

                e.parentNode.insertBefore(j, e);
            })(document, 'script');
        </script>
        <noscript>为正常使用来必力评论功能请激活JavaScript。</noscript>
    </div>
    <!-- City版安装代码已完成 -->
</div>
    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fa fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2023/04/13/xiao-chou-ying-ping/">
                    <div class="card-image">
                        
                        <img src="https://cdn.jsdelivr.net/gh/ldvyyc/ImgBed/fcb7da73360f34fb1343351a207e4fe22cc3a468.jpg@942w_1676h_progressive.jpg" class="responsive-img" alt="《小丑》影评">
                        
                        <span class="card-title">《小丑》影评</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            小丑影评+chatgpt部分内容
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="fa fa-clock-o fa-fw icon-date"></i>2023-04-13
                        </span>
                        <span class="publish-author">
                            
                            <i class="fa fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Waffle/" class="post-category" target="_blank">
                                    Waffle
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Movie/" target="_blank">
                        <span class="chip bg-color">Movie</span>
                    </a>
                    
                    <a href="/tags/Joker/" target="_blank">
                        <span class="chip bg-color">Joker</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fa fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2023/03/25/tou-zi-xue-bi-ji/">
                    <div class="card-image">
                        
                        <img src="https://cdn.jsdelivr.net/gh/ldvyyc/ImgBed/20230326155842.png" class="responsive-img" alt="投资学笔记">
                        
                        <span class="card-title">投资学笔记</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            复习，朱英姿老师投资学课件，记录笔记
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="fa fa-clock-o fa-fw icon-date"></i>2023-03-25
                            </span>
                        <span class="publish-author">
                            
                            <i class="fa fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/learning/" class="post-category" target="_blank">
                                    learning
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Finance/" target="_blank">
                        <span class="chip bg-color">Finance</span>
                    </a>
                    
                    <a href="/tags/Notes/" target="_blank">
                        <span class="chip bg-color">Notes</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>
</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('120')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + '来源: Frank's Blog<br />'
            + '作者: Frank Yu<br />'
            + '链接: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () { bodyElement.removeChild(newdiv); }, 200);
    });
</script>

    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="fa fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fa fa-list"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            // headingsOffset: -205,
            headingSelector: 'h1, h2, h3, h4, h5, h6'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h1, h2, h3, h4, h5, h6').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).slideUp(500);
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).slideDown(500);
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>
    

</main>


<script src="https://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
    MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$', '$'], ['\(', '\)']]}
    });
</script>

<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>
<!-- 代码语言 -->
<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>
<!-- 代码块复制 -->
<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>
<script type="text/javascript" src="/libs/codeBlock/clipboard.min.js"></script>
<!-- 代码块收缩 -->
<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script> 
<!-- 代码块折行 -->
<style type="text/css">code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }</style>


    <footer class="page-footer bg-color">
    <div class="container row center-align">
        <div class="col s12 m8 l8 copy-right">
            &copy; 2023-2023 Yu YuChen 版权所有

            
            &nbsp;<i class="fa fa-area-chart"></i>&nbsp;站点总字数:&nbsp;
            <span class="white-color">80.2k</span>
            

            <br>
            <span id="sitetime"></span>

            
            
            <br>
            
            <span id="busuanzi_container_site_pv" style='display:none'>
                <i class="fa fa-heart-o"></i>
                本站总访问量 <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
            <span id="busuanzi_container_site_uv" style='display:none'>
                人次,&nbsp;访客数 <span id="busuanzi_value_site_uv" class="white-color"></span> 人.
            </span>
            
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/ldvyyc" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fa fa-github"></i>
    </a>



    <a href="mailto:yu-yc20@mails.tsinghua.edu.cn" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fa fa-envelope-open"></i>
    </a>



    <a href="https://zhihu.com/people/ldvyyc" class="tooltipped" target="_blank" data-tooltip="访问我的知乎" data-position="top" data-delay="50">
        <i class="fa fa-inverse">知</i>
    </a>



    <a href="http://wpa.qq.com/msgrd?v=3&uin=2992197817&site=qq&menu=yes" class="tooltipped" target="_blank" data-tooltip="访问我的知乎" data-position="top" data-delay="50">
        <i class="fa fa-qq"></i>
    </a>





    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fa fa-rss"></i>
    </a>
</div>
    </div>
</footer>

<div class="progress-bar"></div>

<!-- 不蒜子计数初始值纠正 -->
<script>
    $(document).ready(function () {

        var int = setInterval(fixCount, 50);
        var pvcountOffset = 80000;
        var uvcountOffset = 20000;

        function fixCount() {
            if (document.getElementById("busuanzi_container_site_pv").style.display != "none") {
                $("#busuanzi_value_site_pv").html(parseInt($("#busuanzi_value_site_pv").html()));
                clearInterval(int);
            }
            if ($("#busuanzi_container_site_pv").css("display") != "none") {
                $("#busuanzi_value_site_uv").html(parseInt($("#busuanzi_value_site_uv").html())); // 加上初始数据 
                clearInterval(int);
            }
        }
    });
</script>

<script language=javascript>
    function siteTime() {
        window.setTimeout("siteTime()", 1000);
        var seconds = 1000;
        var minutes = seconds * 60;
        var hours = minutes * 60;
        var days = hours * 24;
        var years = days * 365;
        var today = new Date();
        var todayYear = today.getFullYear();
        var todayMonth = today.getMonth() + 1;
        var todayDate = today.getDate();
        var todayHour = today.getHours();
        var todayMinute = today.getMinutes();
        var todaySecond = today.getSeconds();
        /* Date.UTC() -- 返回date对象距世界标准时间(UTC)1970年1月1日午夜之间的毫秒数(时间戳)
        year - 作为date对象的年份，为4位年份值
        month - 0-11之间的整数，做为date对象的月份
        day - 1-31之间的整数，做为date对象的天数
        hours - 0(午夜24点)-23之间的整数，做为date对象的小时数
        minutes - 0-59之间的整数，做为date对象的分钟数
        seconds - 0-59之间的整数，做为date对象的秒数
        microseconds - 0-999之间的整数，做为date对象的毫秒数 */
        var t1 = Date.UTC(2023, 03, 10, 00, 00, 00); //北京时间2018-2-13 00:00:00
        var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
        var diff = t2 - t1;
        var diffYears = Math.floor(diff / years);
        var diffDays = Math.floor((diff / days) - diffYears * 365);
        var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
        var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) / minutes);
        var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours - diffMinutes * minutes) / seconds);
        document.getElementById("sitetime").innerHTML = "本站已运行 " + diffYears + " 年 " + diffDays + " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
    }/*因为建站时间还没有一年，就将之注释掉了。需要的可以取消*/
    siteTime();
</script>

    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fa fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("/" + "search.xml", 'searchInput', 'searchResult');
});
</script>
    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fa fa-angle-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <script type="text/javascript"> var OriginTitile = document.title, st; document.addEventListener("visibilitychange", function () { document.hidden ? (document.title = "Σ(っ °Д °;)っ喔哟，崩溃啦！", clearTimeout(st)) : (document.title = "φ(゜▽゜*)♪咦，又好了！", st = setTimeout(function () { document.title = OriginTitile }, 3e3)) })
    </script>

    <!-- Global site tag (gtag.js) - Google Analytics -->



    
    <script src="/libs/others/firework.js"></script>    
    

    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    <!-- 雪花特效 -->
    

</body>

</html>